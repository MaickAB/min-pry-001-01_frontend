import{f as m}from"./chunk-R2XLAL2B.js";import{a as p}from"./chunk-KZFJR7EH.js";import{A as s,R as u,W as n,g as l,o as c,r as a}from"./chunk-VURLBMTQ.js";var v=(()=>{let o=class o{constructor(t,e){this.httpClient=t,this.route=e,this.url="http://127.0.0.1:8000/api/auth/"}register(t){return console.log("REQUEST->Service",t),this.httpClient.post(this.url+"register",t).pipe(a(e=>console.log("RESPONSE->Service",e)),s(e=>(console.error("RESPONSE->Service",e),new l(i=>{i.error("Sin Respuesta del Servidor...!!!")}))))}login(t){return this.httpClient.post(this.url+"login",t).pipe(a(e=>(e.access_token&&(this.setToken(e.access_token),this.setUsuario(e.usuario)),e)),s(e=>c(()=>e)))}logout(){localStorage.removeItem("token"),localStorage.removeItem("roles"),localStorage.removeItem("rol"),localStorage.removeItem("usuario")}isAuthenticated(){let t=this.getToken();if(!t)return!1;let i=JSON.parse(atob(t.split(".")[1])).exp*1e3;return Date.now()<i}setToken(t){localStorage.setItem("token",t)}setUsuario(t){let e=JSON.stringify(t);localStorage.setItem("usuario",btoa(e))}getUsuario(){let t=localStorage.getItem("usuario");return t?JSON.parse(atob(t)):null}getToken(){return localStorage.getItem("token")}};o.\u0275fac=function(e){return new(e||o)(n(p),n(m))},o.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();export{v as a};
