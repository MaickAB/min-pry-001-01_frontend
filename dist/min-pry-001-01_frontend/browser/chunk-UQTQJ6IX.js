import{a as He}from"./chunk-VXYGXVWO.js";import{f as Be}from"./chunk-R2XLAL2B.js";import{a as ye,b as Me,d as ce,e as be,f as Ie,g as Ae,h as Ue,i as pe,j as ue,k as ge,l as A,m as U}from"./chunk-ZSPJV2X2.js";import{f as z,g as G,h as we}from"./chunk-64FVGRX5.js";import{c as se,d as me}from"./chunk-AIZYAHQP.js";import{a as de,b as B}from"./chunk-AQMLQG24.js";import"./chunk-R25NPE2E.js";import{$ as D,E as q,I as M,N as k,_ as R,a as re,aa as j,ba as W,t as oe,v as ae,w as le,z as L}from"./chunk-KZFJR7EH.js";import{$ as b,Aa as O,Ab as S,Bb as te,Cb as I,Db as y,Ea as s,Eb as je,Fa as E,Mb as ie,Nb as ne,R as K,Ua as _,W as J,Wa as d,Za as F,d as ke,db as n,eb as i,fb as p,ja as u,jb as w,ka as g,kb as f,lb as c,nc as P,oc as We,pb as Z,qb as $,qc as Ee,rb as ee,rc as T,sa as Y,sb as Se,tb as m,ub as V,vb as N,xb as Ce,yb as v,zb as x}from"./chunk-VURLBMTQ.js";var it=()=>({width:"100%"});function nt(o,l){o&1&&(n(0,"tr")(1,"th",7),m(2,"CODIGO"),i(),n(3,"th",7),m(4,"ABREVIATURA"),i(),n(5,"th",8),m(6,"NOMBRE"),i(),n(7,"th",9),p(8,"p-tableHeaderCheckbox"),i()())}function rt(o,l){if(o&1&&(n(0,"tr")(1,"td"),m(2),i(),n(3,"td"),m(4),i(),n(5,"td"),m(6),i(),n(7,"td",10),p(8,"p-tableCheckbox",11),i()()),o&2){let r=l.$implicit;s(2),V(r.codigo),s(2),V(r.abreviatura),s(2),V(r.nombre),s(2),d("value",r)}}function ot(o,l){if(o&1){let r=w();p(0,"hr"),n(1,"div",3)(2,"p-table",4),S("selectionChange",function(t){u(r);let a=c();return x(a.selected,t)||(a.selected=t),g(t)}),_(3,nt,9,0,"ng-template",5)(4,rt,9,4,"ng-template",6),i()()}if(o&2){let r=c();s(2),d("value",r.minerales),v("selection",r.selected),d("tableStyle",y(3,it))}}function at(o,l){if(o&1){let r=w();n(0,"div",12)(1,"p-button",13),f("click",function(){u(r);let t=c();return g(t.save())}),i(),n(2,"p-button",14),f("click",function(){u(r);let t=c();return g(t.cancel())}),i()()}o&2&&(s(),d("text",!0)("raised",!0),s(),d("text",!0)("raised",!0))}var Oe=(()=>{let l=class l{constructor(){this.changeMineralComplejo=new Y}showMinerales(e,t){this.minerales=e,this.selected=t,this.estado=!0}save(){this.changeMineralComplejo.emit(this.selected),this.estado=!1}cancel(){this.estado=!1}};l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=b({type:l,selectors:[["app-modal-mineral-complejo"]],outputs:{changeMineralComplejo:"changeMineralComplejo"},standalone:!0,features:[I],decls:3,vars:2,consts:[["closeOnEscape","true","closable","true","header","MINERALES COMPONENTES","styleClass","p-fluid dialog-responsive custom-header",3,"visibleChange","visible","modal"],["pTemplate","content"],["pTemplate","footer"],[1,"card","shadow-3"],["dataKey","id",3,"selectionChange","value","selection","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"width","20%"],[2,"width","40%"],[1,"text-center",2,"width","20%"],[1,"text-center"],[3,"value"],[1,"custom-footer"],["pRipple","","label","Aceptar","icon","pi pi-check","severity","primary",3,"click","text","raised"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","warning",3,"click","text","raised"]],template:function(t,a){t&1&&(n(0,"p-dialog",0),S("visibleChange",function(C){return x(a.estado,C)||(a.estado=C),C}),_(1,ot,5,4,"ng-template",1)(2,at,3,4,"ng-template",2),i()),t&2&&(v("visible",a.estado),d("modal",!0))},dependencies:[T,pe,ce,k,Ae,Ue,ge,ue,D,R]});let o=l;return o})();var Te=(()=>{let l=class l{constructor(e){this.httpClient=e,this.url="http://127.0.0.1:8000/api/codificador/recursoMaterial/mineral/"}index(){return this.httpClient.get(this.url+"index")}search(e){return this.httpClient.get(this.url+"search/"+e)}create(){return this.httpClient.get(this.url+"create")}edit(e){return this.httpClient.get(this.url+"edit/"+e)}store(e){return this.httpClient.post(this.url+"store",e)}update(e){return this.httpClient.put(this.url+"update",e)}destroy(e){return this.httpClient.delete(this.url+"destroy/"+e)}};l.\u0275fac=function(t){return new(t||l)(J(re))},l.\u0275prov=K({token:l,factory:l.\u0275fac,providedIn:"root"});let o=l;return o})();var st=()=>({width:"75vw"});function mt(o,l){o&1&&(n(0,"small",31),m(1,"Requerido, jpg, png max:2MB."),i())}function dt(o,l){if(o&1&&(n(0,"div",32),p(1,"img",33),i()),o&2){let r=c(3);s(),d("src",r.imgUrl,O)}}function ct(o,l){o&1&&(n(0,"small",31),m(1,"Requerido, Alfanum\xE9rico de 1-20."),i())}function pt(o,l){o&1&&(n(0,"small",31),m(1,"Requerido, Alfanum\xE9rico de 1-20."),i())}function ut(o,l){o&1&&(n(0,"small",31),m(1,"Requerido, Alfanum\xE9rico de 1-50."),i())}function gt(o,l){o&1&&(n(0,"small",31),m(1,"Opcional, Alfanum\xE9rico de 0-200."),i())}function _t(o,l){if(o&1){let r=w();n(0,"div")(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"label",8),m(6,"Tipo de Mineral:"),i()(),n(7,"div",9)(8,"p-dropdown",10),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.mineral.idTipoMineral,t)||(a.mineral.idTipoMineral=t),g(t)}),f("onChange",function(){u(r);let t=c(2);return g(t.showModal())}),i()(),n(9,"div",11)(10,"p-button",12),f("click",function(){u(r);let t=c(2);return g(t.showModal())}),i()()()()(),p(11,"hr"),n(12,"div",13)(13,"div",14)(14,"div",15)(15,"div",16)(16,"div",17)(17,"label",18),m(18,"Foto"),i(),n(19,"input",19),f("change",function(t){u(r);let a=c(2);return g(a.loadImg(t))}),i(),_(20,mt,2,0,"small",20)(21,dt,2,1,"div",21),i()()()(),n(22,"div",22)(23,"div",16)(24,"div",17)(25,"label",23),m(26,"Codigo"),i(),n(27,"input",24),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.mineral.codigo,t)||(a.mineral.codigo=t),g(t)}),i(),_(28,ct,2,0,"small",20),i(),n(29,"div",17)(30,"label",25),m(31,"Abreviatura"),i(),n(32,"input",26),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.mineral.abreviatura,t)||(a.mineral.abreviatura=t),g(t)}),i(),_(33,pt,2,0,"small",20),i(),n(34,"div",17)(35,"label",27),m(36,"Nombre"),i(),n(37,"input",28),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.mineral.nombre,t)||(a.mineral.nombre=t),g(t)}),i(),_(38,ut,2,0,"small",20),i(),n(39,"div",17)(40,"label",29),m(41,"Description"),i(),n(42,"textarea",30),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.mineral.descripcion,t)||(a.mineral.descripcion=t),g(t)}),i(),_(43,gt,2,0,"small",20),i()()()(),p(44,"hr"),n(45,"div")(46,"p")(47,"b"),m(48,"USUARIO: "),i(),m(49),p(50,"br"),n(51,"b"),m(52,"FECHA: "),i(),m(53),ie(54,"date"),n(55,"b"),m(56,"HORA: "),i(),m(57),ie(58,"date"),i()()()}if(o&2){let r=c(2);s(8),d("options",r.tipoMinerales),v("ngModel",r.mineral.idTipoMineral),s(2),d("text",!0)("raised",!0),s(10),d("ngIf",!r.imgValida),s(),d("ngIf",r.imgUrl),s(6),v("ngModel",r.mineral.codigo),s(),d("ngIf",!r.valCodigo()),s(4),v("ngModel",r.mineral.abreviatura),s(),d("ngIf",!r.valAbreviatura()),s(4),v("ngModel",r.mineral.nombre),s(),d("ngIf",!r.valNombre()),s(4),v("ngModel",r.mineral.descripcion),s(),d("ngIf",!r.valDescripcion()),s(6),Ce(" ",r.usuario.persona.nombre," ",r.usuario.persona.apePaterno," ",r.usuario.persona.apeMaterno,""),s(4),N(" ",ne(54,19,r.fechaHora,"dd/MM/yyyy")," "),s(4),N(" ",ne(58,22,r.fechaHora,"HH:mm:ss")," ")}}function ft(o,l){o&1&&(n(0,"div")(1,"div",34),p(2,"p-progressSpinner",35),n(3,"span",36),m(4,"Cargando..."),i()()())}function ht(o,l){if(o&1&&(p(0,"hr"),_(1,_t,59,25,"div",3)(2,ft,5,0,"div",3)),o&2){let r=c();s(),d("ngIf",!r.loading),s(),d("ngIf",r.loading)}}function vt(o,l){o&1&&(n(0,"div")(1,"h5"),m(2,"Guardando..."),i(),p(3,"span",42),i())}function xt(o,l){if(o&1){let r=w();n(0,"app-modal-mineral-complejo",37),f("changeMineralComplejo",function(t){u(r);let a=c();return g(a.generarDatos(t))}),i(),n(1,"div",38)(2,"div",39),_(3,vt,4,0,"div",3),i(),n(4,"div",9)(5,"p-button",40),f("click",function(){u(r);let t=c();return g(t.save())}),i(),n(6,"p-button",41),f("click",function(){u(r);let t=c();return g(t.cancel())}),i()()()}if(o&2){let r=c();s(3),d("ngIf",r.saving),s(2),d("text",!0)("raised",!0)("hidden",r.saving),s(),d("text",!0)("raised",!0)}}var Pe=(()=>{let l=class l{constructor(e,t,a){this.principalService=e,this.messageService=t,this.mineralService=a,this.changeMineral=new Y}showCreate(){this.estado=!0,this.loading=!0,this.saving=!1,console.log("REQUEST->create"),this.mineralService.create().subscribe({next:e=>{this.tipoMinerales=e.tipoMinerales,this.minerales=e.minerales,this.mineralesComponent=[],this.imgUrl="/img/imgDefecto.png",this.imgValida=!1,this.mineral={codigo:"",abreviatura:"",nombre:"",descripcion:"",foto:""},this.usuario=this.principalService.getUsuarioStorage(),this.fechaHora=this.initReloj(),console.log("RESPONSE->create",e)},error:e=>{this.messageService.add({severity:"error",summary:"ERROR",detail:e.error.message}),console.log("RESPONSE->create Error en:",e.error)},complete:()=>{this.loading=!1}})}showEdit(e){this.estado=!0,this.loading=!0,this.saving=!1,console.log("REQUEST->edit",e),this.mineralService.edit(e).subscribe({next:t=>{this.tipoMinerales=t.tipoMinerales,this.mineral=t.mineral,this.minerales=t.minerales,this.updateMineralesComponent(),this.imgUrl=t.mineral.foto,this.imgValida=!0,this.usuario=this.principalService.getUsuarioStorage(),this.fechaHora=this.initReloj(),console.log("RESPONSE->edit",t)},error:t=>{this.messageService.add({severity:"error",summary:"ERROR",detail:t.error.message}),console.log("RESPONSE->edit Error en:",t.error)},complete:()=>{this.loading=!1}})}save(){this.prepareData(),this.validate()?(this.saving=!0,this.mineral.id?(console.log("REQUEST->update",this.mineral),this.mineralService.update(this.mineral).subscribe({next:e=>{this.mineral=e.mineral,this.changeMineral.emit(),this.messageService.add({severity:"success",summary:"CONFIRMACI\xD3N",detail:e.msg}),console.log("RESPONSE->update",e),this.estado=!1},error:e=>{this.messageService.add({severity:"error",summary:"ERROR",detail:e.error.message}),console.log("RESPONSE->update Error en:",e.error)}})):(console.log("REQUEST->store",this.mineral),this.mineralService.store(this.mineral).subscribe({next:e=>{this.mineral=e.mineral,this.changeMineral.emit(),this.messageService.add({severity:"success",summary:"CONFIRMACI\xD3N",detail:e.msg}),console.log("RESPONSE->store",e),this.estado=!1},error:e=>{this.messageService.add({severity:"error",summary:"ERROR",detail:e.error.message}),console.log("RESPONSE->store Error en:",e.error)}}))):(this.messageService.add({severity:"error",summary:"ERROR",detail:"Datos incorrectos...!!"}),console.log("Datos Incorrectos...!!"))}showModal(){this.mineral.idTipoMineral==2&&this.modal.showMinerales(this.minerales,this.mineralesComponent)}cancel(){this.estado=!1}prepareData(){this.mineral.minerales=this.mineralesComponent.map(e=>({idMineralComponente:e.id}))}updateMineralesComponent(){this.mineralesComponent=[],this.minerales.forEach(e=>{this.mineral.minerales?.forEach(t=>{e.id==t.idMineralComponente&&this.mineralesComponent.push(e)})})}generarDatos(e){this.mineral.codigo="",this.mineral.abreviatura="",this.mineral.nombre="",this.mineral.descripcion="",this.mineralesComponent=e,e.forEach(t=>{this.mineral.codigo=this.mineral.codigo+t.codigo+" ",this.mineral.abreviatura=this.mineral.abreviatura+t.abreviatura+" ",this.mineral.nombre=this.mineral.nombre+t.nombre+" ",this.mineral.descripcion=this.mineral.descripcion+t.descripcion+" "}),this.mineral.descripcion="Mineral Complejo formado por: "+this.mineral.abreviatura}loadImg(e){let a=["jpg","png"],h;if(e.target.files.length>0){let C=e.target.files[0],_e=C.size,fe=C.name.split(".").pop().toLowerCase();_e>2097152||!a.includes(fe)?this.imgValida=!1:this.imgValida=!0,h=C;let H=new FileReader;H.onload=Q=>{this.imgUrl=Q.target.result,this.mineral.foto=Q.target.result},H.readAsDataURL(h)}}initReloj(){setInterval(()=>{this.fechaHora=new Date},1e3)}valCodigo(){return!!/^[\w .-]{1,20}$/.test(this.mineral.codigo)}valAbreviatura(){return!!/^[\w áéíóúüñÁÉÍÓÚÜÑ.-]{1,20}$/.test(this.mineral.abreviatura)}valNombre(){return!!/^[\w áéíóúüñÁÉÍÓÚÜÑ.-]{1,50}$/.test(this.mineral.nombre)}valDescripcion(){return!!/^[\w áéíóúüñÁÉÍÓÚÜÑ:.-]{0,200}$/.test(this.mineral.descripcion)}validate(){return this.valCodigo()&&this.valAbreviatura()&&this.valNombre()&&this.valDescripcion()&&this.imgValida}};l.\u0275fac=function(t){return new(t||l)(E(we),E(M),E(Te))},l.\u0275cmp=b({type:l,selectors:[["app-dialog-mineral"]],viewQuery:function(t,a){if(t&1&&Z(Oe,5),t&2){let h;$(h=ee())&&(a.modal=h.first)}},outputs:{changeMineral:"changeMineral"},standalone:!0,features:[I],decls:3,vars:5,consts:[["closeOnEscape","true","closable","true","header","REGISTRO DE MINERALES","styleClass","p-fluid dialog-responsive custom-header",3,"visibleChange","visible","modal"],["pTemplate","content"],["pTemplate","footer"],[4,"ngIf"],[1,"grid","flex","justify-content-center"],[1,"col-10"],[1,"grid","field"],[1,"col-4","text-right","pt-2"],["for","idTipoMineral"],[1,"col-6"],["id","idTipoMineral","optionValue","id","optionLabel","nombre",3,"ngModelChange","onChange","options","ngModel"],[1,"col-1"],["pRipple","","icon","pi pi-eye","severity","primary",3,"click","text","raised"],[1,"grid"],[1,"col-12","md:col-4"],[1,"flex","flex-column","gap-2"],[1,"card","shadow-3",2,"min-height","550px"],[1,"field"],["for","foto"],["type","file","pInputText","","id","foto",3,"change"],["class","p-error",4,"ngIf"],["class","pt-3",4,"ngIf"],[1,"col-12","md:col-8"],["for","codigo"],["type","text","pInputText","","id","codigo",1,"w-full",3,"ngModelChange","ngModel"],["for","abreviatura"],["type","text","pInputText","","id","abreviatura",1,"w-full",3,"ngModelChange","ngModel"],["for","nombre"],["type","text","pInputText","","id","nombre",1,"w-full",3,"ngModelChange","ngModel"],["for","descripcion"],["pInputTextarea","","id","descripcion","rows","3","cols","20",1,"w-full",3,"ngModelChange","ngModel"],[1,"p-error"],[1,"pt-3"],["alt","Vista previa de la imagen",2,"width","100%","height","350px",3,"src"],[1,"card","mt-3","flex","flex-column","justify-content-center","align-items-center",2,"height","30vh"],["ariaLabel","loading"],[1,"loader","ps-5"],[3,"changeMineralComplejo"],[1,"grid","custom-footer"],[1,"col-6","text-left"],["pRipple","","label","Guardar","icon","pi pi-check","severity","primary",3,"click","text","raised","hidden"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","warning",3,"click","text","raised"],[1,"saving"]],template:function(t,a){t&1&&(n(0,"p-dialog",0),S("visibleChange",function(C){return x(a.estado,C)||(a.estado=C),C}),_(1,ht,3,2,"ng-template",1)(2,xt,7,6,"ng-template",2),i()),t&2&&(F(y(4,st)),v("visible",a.estado),d("modal",!0))},dependencies:[U,A,T,P,Ee,G,z,k,ge,ue,L,oe,ae,le,D,R,W,j,me,se,B,Oe]});let o=l;return o})();var Ct=()=>({width:"450px"}),Et=()=>({width:"100%"}),wt=()=>[10,25,50],yt=()=>["codigo","abreviatura","nombre","icm"],Mt=()=>({"min-width":"75rem"});function bt(o,l){if(o&1){let r=w();n(0,"div",17)(1,"div",18)(2,"p-button",19),f("click",function(){u(r);let t=c(2);return g(t.showCreate())}),i(),n(3,"p-button",20),f("click",function(){u(r);let t=c(2);return g(t.exportXLS())}),i()(),n(4,"div",21)(5,"span",22),p(6,"i",23),n(7,"input",24),f("input",function(t){u(r),c();let a=Se(12);return g(a.filterGlobal(t.target.value,"contains"))}),i()()()()}o&2&&(s(2),d("outlined",!0)("raised",!0),s(),d("outlined",!0)("raised",!0)("text",!0))}function It(o,l){o&1&&(n(0,"tr")(1,"th",25),m(2," FOTO "),p(3,"p-sortIcon",26),i(),n(4,"th",27),m(5," CODIGO "),p(6,"p-sortIcon",28),i(),n(7,"th",29),m(8," ABREBIATURA "),p(9,"p-sortIcon",30),i(),n(10,"th",31),m(11," NOMBRE "),p(12,"p-sortIcon",32),i(),n(13,"th",33),m(14," OPCIONES "),i()())}function Tt(o,l){if(o&1){let r=w();n(0,"tr")(1,"td",34),p(2,"img",35),i(),n(3,"td"),m(4),i(),n(5,"td"),m(6),i(),n(7,"td"),m(8),i(),n(9,"td")(10,"p-button",36),f("click",function(){let t=u(r).$implicit,a=c(2);return g(a.showReport(t.id))}),i(),n(11,"p-button",37),f("click",function(){let t=u(r).$implicit,a=c(2);return g(a.showEdit(t.id))}),i(),n(12,"p-button",38),f("click",function(){let t=u(r).$implicit,a=c(2);return g(a.showDelete(t.id))}),i()()()}if(o&2){let r=l.$implicit;s(2),d("src",r.foto,O),s(2),V(r.codigo),s(2),V(r.abreviatura),s(2),V(r.nombre),s(2),d("rounded",!0)("outlined",!0),s(),d("rounded",!0)("outlined",!0),s(),d("rounded",!0)("outlined",!0)}}function Rt(o,l){if(o&1){let r=w();n(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"label",10),m(7,"Tipo Mineral:"),i()(),n(8,"div",11)(9,"p-dropdown",12),f("onChange",function(t){u(r);let a=c();return g(a.filter(t.value))})("onClear",function(){u(r);let t=c();return g(t.clearFilter())}),i()()()()(),p(10,"hr"),n(11,"p-table",13,0),_(13,bt,8,5,"ng-template",14)(14,It,15,0,"ng-template",15)(15,Tt,13,10,"ng-template",16),i()()()}if(o&2){let r=c();s(9),F(y(12,Et)),d("options",r.tipoMinerales)("showClear",!0),s(2),d("value",r.minerales)("rows",10)("rowsPerPageOptions",y(13,wt))("paginator",!0)("globalFilterFields",y(14,yt))("tableStyle",y(15,Mt))("rowHover",!0)("showCurrentPageReport",!0)}}function Dt(o,l){o&1&&(n(0,"div")(1,"div",39),p(2,"p-progressSpinner",40),n(3,"span",41),m(4,"MINEXA S.R.L."),i()()())}var Ye=(()=>{let l=class l{constructor(e,t,a){this.mineralService=e,this.messageService=t,this.confirmationService=a,this.loading=!1}ngOnInit(){this.show()}show(){this.loading=!0,console.log("REQUEST->index"),this.mineralService.index().subscribe({next:e=>{this.tipoMinerales=e.tipoMinerales,this.minerales=e.minerales,this.data=e.minerales,console.log("RESPONSE->index",e)},error:e=>{this.messageService.add({severity:"error",summary:"ERROR",detail:e.error.message}),console.log("RESPONSE->index Error en:",e.error)},complete:()=>{this.loading=!1}})}showCreate(){this.dialog.showCreate()}showEdit(e){this.dialog.showEdit(e)}showDelete(e){this.confirmationService.confirm({message:"Est\xE1 seguro de eliminar el Registro...?",header:"Confirmar",icon:"pi pi-exclamation-triangle",accept:()=>{console.log("REQUEST->destroy",e),this.mineralService.destroy(e).subscribe({next:t=>{this.minerales=this.minerales.filter(a=>a.id!==e),this.messageService.add({severity:"success",summary:"CONFIRMACI\xD3N",detail:t.msg,life:3e3}),console.log("RESPONSE->destroy",t)},error:t=>{this.messageService.add({severity:"error",summary:"ERROR",detail:t.error.message}),console.log("RESPONSE->destroy Error en:",t.error)}})}})}showReport(e){alert("showReport"+e)}exportXLS(){alert("exportXLS")}filter(e){this.minerales=this.data.filter(t=>t.idTipoMineral==e)}clearFilter(){this.minerales=this.data}};l.\u0275fac=function(t){return new(t||l)(E(Te),E(M),E(q))},l.\u0275cmp=b({type:l,selectors:[["app-index-mineral"]],viewQuery:function(t,a){if(t&1&&Z(Pe,5),t&2){let h;$(h=ee())&&(a.dialog=h.first)}},standalone:!0,features:[te([M,q]),I],decls:11,vars:5,consts:[["dt",""],[1,"card-header","shadow-5"],[4,"ngIf"],[1,"card-footer"],[3,"changeMineral"],[1,"card-body","shadow-5"],[1,"grid","flex","justify-content-center"],[1,"col-10"],[1,"grid","field"],[1,"col-4","text-right","pt-2"],["for","tipoMineral"],[1,"col-6"],["id","tipoMineral","optionValue","id","optionLabel","nombre","placeholder","TODOS",3,"onChange","onClear","options","showClear"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","rowsPerPageOptions","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"grid"],[1,"col-12","sm:col-8"],["pRipple","","severity","primary","label","Nuevo","icon","pi pi-plus",1,"ml-2",3,"click","outlined","raised"],["pRipple","","severity","info","label","Reporte","icon","pi pi-print",1,"ml-2",3,"click","outlined","raised","text"],[1,"col-12","sm:col-4","text-right"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["pSortableColumn","id",1,"text-center",2,"width","10%"],["field","id"],["pSortableColumn","codigo",2,"width","15%"],["field","codigo"],["pSortableColumn","abreviatura",2,"width","20%"],["field","abreviatura"],["pSortableColumn","nombre",2,"width","35%"],["field","nombre"],[2,"width","20%"],[1,"text-center"],[2,"width","70px","height","70px","border-radius","50px","border","3px solid #dcdcdc",3,"src"],["pRipple","","icon","pi pi-print","severity","info",1,"mr-2",3,"click","rounded","outlined"],["pRipple","","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded","outlined"],["pRipple","","icon","pi pi-trash","severity","danger",3,"click","rounded","outlined"],[1,"card","mt-3","flex","flex-column","justify-content-center","align-items-center",2,"height","50vh"],["ariaLabel","loading"],[1,"loader","ps-5"]],template:function(t,a){t&1&&(n(0,"div",1)(1,"h3"),m(2,"Gesti\xF3n de Minerales"),i()(),p(3,"hr"),_(4,Rt,16,16,"div",2),p(5,"hr"),n(6,"div",3)(7,"app-dialog-mineral",4),f("changeMineral",function(){return a.show()}),i(),p(8,"p-confirmDialog")(9,"p-toast"),i(),_(10,Dt,5,0,"div",2)),t&2&&(s(4),d("ngIf",!a.loading),s(4),F(y(4,Ct)),s(2),d("ngIf",a.loading))},dependencies:[U,A,G,z,k,pe,ce,be,Ie,D,R,B,de,Me,ye,T,P,W,j,L,Pe]});let o=l;return o})();var Ze=(()=>{let l=class l{constructor(e){this.httpClient=e,this.url="http://127.0.0.1:8000/api/codificador/recursoMaterial/empresa/"}edit(){return this.httpClient.get(this.url+"edit")}update(e){return this.httpClient.put(this.url+"update",e)}};l.\u0275fac=function(t){return new(t||l)(J(re))},l.\u0275prov=K({token:l,factory:l.\u0275fac,providedIn:"root"});let o=l;return o})();function Nt(o,l){o&1&&(n(0,"small",26),m(1,"Requerido, Alfanum\xE9rico de 1-50."),i())}function Ot(o,l){o&1&&(n(0,"small",26),m(1,"Opcional, Alfanum\xE9rico de 0-200."),i())}function Ft(o,l){o&1&&(n(0,"small",26),m(1,"Requerido, Alfanum\xE9rico de 1-200."),i())}function Pt(o,l){o&1&&(n(0,"small",26),m(1,"Requerido, Num\xE9rico."),i())}function Lt(o,l){o&1&&(n(0,"small",26),m(1,"Requerido, jpg, png max:5MB."),i())}function kt(o,l){if(o&1&&(n(0,"div"),p(1,"img",27),i()),o&2){let r=c(2);s(),d("src",r.imgUrl,O)}}function jt(o,l){if(o&1){let r=w();n(0,"div")(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"label",13),m(6,"Nombre"),i(),n(7,"input",14),S("ngModelChange",function(t){u(r);let a=c();return x(a.empresa.nombre,t)||(a.empresa.nombre=t),g(t)}),i(),_(8,Nt,2,0,"small",15),i(),n(9,"div",12)(10,"label",16),m(11,"Description"),i(),n(12,"textarea",17),S("ngModelChange",function(t){u(r);let a=c();return x(a.empresa.descripcion,t)||(a.empresa.descripcion=t),g(t)}),i(),_(13,Ot,2,0,"small",15),i(),n(14,"div",12)(15,"label",18),m(16,"Direcci\xF3n"),i(),n(17,"input",19),S("ngModelChange",function(t){u(r);let a=c();return x(a.empresa.direccion,t)||(a.empresa.direccion=t),g(t)}),i(),_(18,Ft,2,0,"small",15),i(),n(19,"div",12)(20,"label",20),m(21,"Tel\xE9fono/Celular"),i(),n(22,"input",21),S("ngModelChange",function(t){u(r);let a=c();return x(a.empresa.fono,t)||(a.empresa.fono=t),g(t)}),i(),_(23,Pt,2,0,"small",15),i()()(),n(24,"div",10)(25,"div",11)(26,"div",22)(27,"label",23),m(28,"Logo"),i(),n(29,"input",24),f("change",function(t){u(r);let a=c();return g(a.loadImg(t))}),i(),_(30,Lt,2,0,"small",15),n(31,"div",25),_(32,kt,2,1,"div",3),i()()()()()()}if(o&2){let r=c();s(7),v("ngModel",r.empresa.nombre),s(),d("ngIf",!r.valNombre()),s(4),v("ngModel",r.empresa.descripcion),s(),d("ngIf",!r.valDescripcion()),s(4),v("ngModel",r.empresa.direccion),s(),d("ngIf",!r.valDireccion()),s(4),v("ngModel",r.empresa.fono),s(),d("ngIf",!r.valFono()),s(7),d("ngIf",!r.imgValida),s(2),d("ngIf",r.imgUrl)}}function Wt(o,l){o&1&&(n(0,"div")(1,"div",28),p(2,"p-progressSpinner",29),n(3,"span",30),m(4,"MINEXA S.R.L."),i()()())}function Bt(o,l){o&1&&(n(0,"div")(1,"h5"),m(2,"Guardando..."),i(),p(3,"span",31),i())}var $e=(()=>{let l=class l{constructor(e,t,a){this.route=e,this.messageService=t,this.empresaService=a,this.loading=!1}ngOnInit(){this.show()}show(){this.loading=!0,this.saving=!1,console.log("REQUEST->edit"),this.empresaService.edit().subscribe({next:e=>{e.empresa?(this.empresa=e.empresa,this.imgUrl=e.empresa.logo,this.imgValida=!0):(this.empresa={codigo:"",nombre:"",descripcion:"",direccion:"",fono:"",logo:""},this.imgValida=!1),console.log("RESPONSE->edit",e)},error:e=>{console.log("RESPONSE-> Error en:",e.error)},complete:()=>{this.loading=!1}})}save(){this.validate()?(console.log("REQUEST-> update",this.empresa),this.empresaService.update(this.empresa).subscribe({next:e=>{this.empresa=e.empresa,this.messageService.add({severity:"success",summary:"CONFIRMACI\xD3N",detail:e.msg}),console.log("RESPONSE->update",e),setTimeout(()=>ke(this,null,function*(){yield this.navDashboard()}),500)},error:e=>{this.messageService.add({severity:"error",summary:"ERROR",detail:e.error.message}),console.log("RESPONSE->update Error en:",e.error)}})):(this.messageService.add({severity:"error",summary:"ERROR",detail:"Datos incorrectos...!!"}),console.log("Datos Incorrectos...!!"))}navDashboard(){this.route.navigateByUrl("principal",{skipLocationChange:!1})}cancel(){this.show()}loadImg(e){let a=["jpg","png"],h;if(e.target.files.length>0){let C=e.target.files[0],_e=C.size,fe=C.name.split(".").pop().toLowerCase();_e>2097152||!a.includes(fe)?this.imgValida=!1:this.imgValida=!0,h=C;let H=new FileReader;H.onload=Q=>{this.imgUrl=Q.target.result,this.empresa.logo=Q.target.result},H.readAsDataURL(h)}}valNombre(){return!!/^[\w áéíóúüñÁÉÍÓÚÜÑ.-]{1,50}$/.test(this.empresa.nombre)}valDescripcion(){return!!/^[\w áéíóúüñÁÉÍÓÚÜÑ.-]{0,200}$/.test(this.empresa.descripcion)}valDireccion(){return!!/^[\w áéíóúüñÁÉÍÓÚÜÑ.-]{1,200}$/.test(this.empresa.direccion)}valFono(){return!!/^[\d +-]{1,20}$/.test(this.empresa.fono)}validate(){return this.empresa?this.valNombre()&&this.valDescripcion()&&this.valDireccion()&&this.valFono():"empresa vacia--false"}};l.\u0275fac=function(t){return new(t||l)(E(Be),E(M),E(Ze))},l.\u0275cmp=b({type:l,selectors:[["app-edit-empresa"]],standalone:!0,features:[te([M]),I],decls:13,vars:8,consts:[[1,"card-header","shadow-3"],[1,"text-green-900"],[1,"card-body","shadow-3"],[4,"ngIf"],[1,"grid","custom-footer"],[1,"col-6","text-left"],[1,"col-6","text-right"],["pRipple","","label","Guardar","icon","pi pi-check","severity","primary",3,"click","text","raised","hidden"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","warning",3,"click","text","raised"],[1,"grid"],[1,"col-12","md:col-6"],[1,"card","shadow-3",2,"min-height","500px"],[1,"field"],["for","name"],["type","text","pInputText","","id","nombre",1,"w-full",3,"ngModelChange","ngModel"],["class","p-error",4,"ngIf"],["for","descripcion"],["pInputTextarea","","id","descripcion","rows","3","cols","20",1,"w-full",3,"ngModelChange","ngModel"],["for","direccion"],["type","text","pInputText","","id","direccion",1,"w-full",3,"ngModelChange","ngModel"],["for","fono"],["type","text","pInputText","","id","fono","name","fono",1,"w-full",3,"ngModelChange","ngModel"],[1,"flex","flex-column","gap-2"],["for","logo"],["type","file","pInputText","","id","logo",3,"change"],[1,"card","mt-2",2,"width","100%","min-height","300px"],[1,"p-error"],["alt","Vista previa de la imagen",2,"width","100%","height","auto",3,"src"],[1,"card","mt-3","flex","flex-column","justify-content-center","align-items-center",2,"height","50vh"],["ariaLabel","loading"],[1,"loader","ps-5"],[1,"saving"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"h3",1),m(2,"EMPRESA"),i()(),n(3,"div",2),_(4,jt,33,10,"div",3)(5,Wt,5,0,"div",3),i(),n(6,"div",4)(7,"div",5),_(8,Bt,4,0,"div",3),i(),n(9,"div",6)(10,"p-button",7),f("click",function(){return a.save()}),i(),n(11,"p-button",8),f("click",function(){return a.cancel()}),i()(),p(12,"p-toast"),i()),t&2&&(s(4),d("ngIf",!a.loading),s(),d("ngIf",a.loading),s(3),d("ngIf",a.saving),s(2),d("text",!0)("raised",!0)("hidden",a.saving),s(),d("text",!0)("raised",!0))},dependencies:[U,A,L,oe,ae,le,W,j,me,se,D,R,T,P,B,de]});let o=l;return o})();var Ne=(()=>{let l=class l{constructor(e){this.httpClient=e,this.url="http://127.0.0.1:8000/api/codificador/recursoMaterial/sucursal/"}index(){return this.httpClient.get(this.url+"index")}indexByCriterio(e){return this.httpClient.get(this.url+"search/"+e)}create(){return this.httpClient.get(this.url+"create/")}store(e){return this.httpClient.post(this.url+"store",e)}edit(e){return this.httpClient.get(this.url+"edit/"+e)}update(e){return this.httpClient.put(this.url+"update",e)}destroy(e){return this.httpClient.delete(this.url+"destroy/"+e)}};l.\u0275fac=function(t){return new(t||l)(J(re))},l.\u0275prov=K({token:l,factory:l.\u0275fac,providedIn:"root"});let o=l;return o})();var At=()=>({width:"75vw"});function Ut(o,l){o&1&&(n(0,"small",32),m(1,"Requerido."),i())}function Ht(o,l){o&1&&(n(0,"small",32),m(1,"Requerido, jpg, png max:2MB."),i())}function Qt(o,l){if(o&1&&(n(0,"div",33),p(1,"img",34),i()),o&2){let r=c(3);s(),d("src",r.imgUrl,O)}}function qt(o,l){o&1&&(n(0,"small",32),m(1,"Requerido, Alfanum\xE9rico de 1-50."),i())}function zt(o,l){o&1&&(n(0,"small",32),m(1,"Opcional, Alfanum\xE9rico de 0-200."),i())}function Gt(o,l){o&1&&(n(0,"small",32),m(1,"Requerido, Alfanum\xE9rico de 1-200."),i())}function Xt(o,l){o&1&&(n(0,"small",32),m(1,"Requerido, Num\xE9rico."),i())}function Kt(o,l){o&1&&(n(0,"small",32),m(1,"Requerido, Num\xE9rico."),i())}function Jt(o,l){o&1&&(n(0,"small",32),m(1,"Requerido, Num\xE9rico."),i())}function Yt(o,l){if(o&1){let r=w();n(0,"div")(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"label"),m(6,"Regional:"),i()(),n(7,"div",8)(8,"p-dropdown",9),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.sucursal.idRegional,t)||(a.sucursal.idRegional=t),g(t)}),i(),_(9,Ut,2,0,"small",10),i()()()(),p(10,"hr"),n(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"label",15),m(16,"Foto"),i(),n(17,"input",16),f("change",function(t){u(r);let a=c(2);return g(a.loadImg(t))}),i(),_(18,Ht,2,0,"small",10)(19,Qt,2,1,"div",17),i()()(),n(20,"div",18)(21,"div",13)(22,"div",14)(23,"label",19),m(24,"Nombre"),i(),n(25,"input",20),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.sucursal.nombre,t)||(a.sucursal.nombre=t),g(t)}),i(),_(26,qt,2,0,"small",10),i(),n(27,"div",14)(28,"label",21),m(29,"Description"),i(),n(30,"textarea",22),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.sucursal.descripcion,t)||(a.sucursal.descripcion=t),g(t)}),i(),_(31,zt,2,0,"small",10),i(),n(32,"div",14)(33,"label",23),m(34,"Direcci\xF3n"),i(),n(35,"input",24),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.sucursal.direccion,t)||(a.sucursal.direccion=t),g(t)}),i(),_(36,Gt,2,0,"small",10),i(),n(37,"div",14)(38,"label",25),m(39,"Tel\xE9fono/Celular"),i(),n(40,"input",26),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.sucursal.fono,t)||(a.sucursal.fono=t),g(t)}),i(),_(41,Xt,2,0,"small",10),i(),n(42,"div",11)(43,"div",27)(44,"label",28),m(45,"N\xBA Lote Inicio"),i(),n(46,"input",29),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.sucursal.numLoteInicio,t)||(a.sucursal.numLoteInicio=t),g(t)}),i(),_(47,Kt,2,0,"small",10),i(),n(48,"div",27)(49,"label",30),m(50,"N\xBA Lote Fin"),i(),n(51,"input",31),S("ngModelChange",function(t){u(r);let a=c(2);return x(a.sucursal.numLoteFin,t)||(a.sucursal.numLoteFin=t),g(t)}),i(),_(52,Jt,2,0,"small",10),i()()()()(),p(53,"hr"),n(54,"div")(55,"p")(56,"b"),m(57,"USUARIO: "),i(),m(58),p(59,"br"),n(60,"b"),m(61,"FECHA: "),i(),m(62),ie(63,"date"),n(64,"b"),m(65,"HORA: "),i(),m(66),ie(67,"date"),i()()()}if(o&2){let r=c(2);s(8),d("options",r.regionales),v("ngModel",r.sucursal.idRegional),s(),d("ngIf",!r.valIdRegional()),s(9),d("ngIf",!r.imgValida),s(),d("ngIf",r.imgUrl),s(6),v("ngModel",r.sucursal.nombre),s(),d("ngIf",!r.valNombre()),s(4),v("ngModel",r.sucursal.descripcion),s(),d("ngIf",!r.valDescripcion()),s(4),v("ngModel",r.sucursal.direccion),s(),d("ngIf",!r.valDireccion()),s(4),v("ngModel",r.sucursal.fono),s(),d("ngIf",!r.valFono()),s(5),v("ngModel",r.sucursal.numLoteInicio),s(),d("ngIf",!r.valNumLoteInicio()),s(4),v("ngModel",r.sucursal.numLoteFin),s(),d("ngIf",!r.valNumLoteFin()),s(6),Ce(" ",r.usuario.persona.nombre," ",r.usuario.persona.apePaterno," ",r.usuario.persona.apeMaterno,""),s(4),N(" ",ne(63,22,r.fechaHora,"dd/MM/yyyy")," "),s(4),N(" ",ne(67,25,r.fechaHora,"HH:mm:ss")," ")}}function Zt(o,l){o&1&&(n(0,"div")(1,"div",35),p(2,"p-progressSpinner",36),n(3,"span",37),m(4,"Cargando..."),i()()())}function $t(o,l){if(o&1&&(p(0,"hr"),_(1,Yt,68,28,"div",3)(2,Zt,5,0,"div",3)),o&2){let r=c();s(),d("ngIf",!r.loading),s(),d("ngIf",r.loading)}}function ei(o,l){o&1&&(n(0,"div")(1,"h5"),m(2,"Guardando..."),i(),p(3,"span",42),i())}function ti(o,l){if(o&1){let r=w();n(0,"div",38)(1,"div",39),_(2,ei,4,0,"div",3),i(),n(3,"div",8)(4,"p-button",40),f("click",function(){u(r);let t=c();return g(t.save())}),i(),n(5,"p-button",41),f("click",function(){u(r);let t=c();return g(t.cancel())}),i()()()}if(o&2){let r=c();s(2),d("ngIf",r.saving),s(2),d("text",!0)("raised",!0)("hidden",r.saving),s(),d("text",!0)("raised",!0)}}var xe=(()=>{let l=class l{constructor(e,t,a){this.principalService=e,this.messageService=t,this.sucursalService=a,this.changeSucursal=new Y}showCreate(){this.estado=!0,this.loading=!0,this.saving=!1,console.log("REQUEST->create"),this.sucursalService.create().subscribe({next:e=>{this.regionales=e.regionales,this.imgUrl="/img/imgDefecto.png",this.imgValida=!1,this.sucursal={idRegional:0,nombre:"",descripcion:"",direccion:"",fono:"",numLoteInicio:"",numLoteFin:"",foto:""},this.usuario=this.principalService.getUsuarioStorage(),this.fechaHora=this.initReloj(),console.log("RESPONSE->create",e)},error:e=>{this.messageService.add({severity:"error",summary:"ERROR",detail:e.error.message}),console.log("RESPONSE->create Error en:",e.error)},complete:()=>{this.loading=!1}})}showEdit(e){this.estado=!0,this.loading=!0,this.saving=!1,console.log("REQUEST->edit",e),this.sucursalService.edit(e).subscribe({next:t=>{this.regionales=t.regionales,this.imgUrl=t.sucursal.foto,this.imgValida=!0,this.sucursal=t.sucursal,this.usuario=this.principalService.getUsuarioStorage(),this.fechaHora=this.initReloj(),console.log("RESPONSE->edit",t)},error:t=>{this.messageService.add({severity:"error",summary:"ERROR",detail:t.error.message}),console.log("RESPONSE->edit Error en:",t.error)},complete:()=>{this.loading=!1}})}save(){this.validate()?(this.saving=!0,this.sucursal.id?(console.log("REQUEST->update",this.sucursal),this.sucursalService.update(this.sucursal).subscribe({next:e=>{this.sucursal=e.sucursal,this.changeSucursal.emit(),this.messageService.add({severity:"success",summary:"CONFIRMACI\xD3N",detail:e.msg}),console.log("RESPONSE->update",e),this.estado=!1},error:e=>{this.messageService.add({severity:"error",summary:"ERROR",detail:e.error.message}),console.log("RESPONSE->update Error en:",e.error)}})):(console.log("REQUEST->store",this.sucursal),this.sucursalService.store(this.sucursal).subscribe({next:e=>{this.sucursal=e.sucursal,this.changeSucursal.emit(),this.messageService.add({severity:"success",summary:"CONFIRMACI\xD3N",detail:e.msg}),console.log("RESPONSE->store",e),this.estado=!1},error:e=>{this.messageService.add({severity:"error",summary:"ERROR",detail:e.error.message}),console.log("RESPONSE->store Error en:",e.error)}}))):(this.messageService.add({severity:"error",summary:"ERROR",detail:"Datos incorrectos...!!"}),console.log("Datos Incorrectos...!!"))}cancel(){this.estado=!1}loadImg(e){let a=["jpg","png"],h;if(e.target.files.length>0){let C=e.target.files[0],_e=C.size,fe=C.name.split(".").pop().toLowerCase();_e>2097152||!a.includes(fe)?this.imgValida=!1:this.imgValida=!0,h=C;let H=new FileReader;H.onload=Q=>{this.imgUrl=Q.target.result,this.sucursal.foto=Q.target.result},H.readAsDataURL(h)}}initReloj(){setInterval(()=>{this.fechaHora=new Date},1e3)}valIdRegional(){return!!this.sucursal.idRegional}valNombre(){return!!/^[\w áéíóúüñÁÉÍÓÚÜÑ.-]{1,50}$/.test(this.sucursal.nombre)}valDescripcion(){return!!/^[\w áéíóúüñÁÉÍÓÚÜÑ.-]{0,200}$/.test(this.sucursal.descripcion)}valDireccion(){return!!/^[\w áéíóúüñÁÉÍÓÚÜÑ.-]{1,200}$/.test(this.sucursal.direccion)}valFono(){return!!/^[\d +-]{1,20}$/.test(this.sucursal.fono)}valNumLoteInicio(){return!!/^[\d]{1,20}$/.test(this.sucursal.numLoteInicio)}valNumLoteFin(){return!!/^[\d]{1,20}$/.test(this.sucursal.numLoteFin)}validate(){return this.valIdRegional()&&this.valNombre()&&this.valDescripcion()&&this.valDireccion()&&this.valFono()&&this.imgValida&&this.valNumLoteInicio()&&this.valNumLoteFin()}};l.\u0275fac=function(t){return new(t||l)(E(we),E(M),E(Ne))},l.\u0275cmp=b({type:l,selectors:[["app-dialog-sucursal"]],outputs:{changeSucursal:"changeSucursal"},standalone:!0,features:[I],decls:3,vars:5,consts:[["closeOnEscape","true","closable","true","header","REGISTRO DE SUCURSALES","styleClass","p-fluid dialog-responsive custom-header",3,"visibleChange","visible","modal"],["pTemplate","content"],["pTemplate","footer"],[4,"ngIf"],[1,"grid","flex","justify-content-center"],[1,"col-10"],[1,"grid","field"],[1,"col-4","text-right","pt-2"],[1,"col-6"],["id","idRegional","optionValue","id","optionLabel","nombre",3,"ngModelChange","options","ngModel"],["class","p-error",4,"ngIf"],[1,"grid"],[1,"col-12","md:col-4"],[1,"card","shadow-3",2,"min-height","580px"],[1,"field"],["for","foto"],["type","file","pInputText","","id","foto",3,"change"],["class","pt-3",4,"ngIf"],[1,"col-12","md:col-8"],["for","nombre"],["type","text","pInputText","","id","nombre",1,"w-full",3,"ngModelChange","ngModel"],["for","descripcion"],["pInputTextarea","","id","descripcion","rows","3","cols","20",1,"w-full",3,"ngModelChange","ngModel"],["for","direccion"],["type","text","pInputText","","id","direccion",1,"w-full",3,"ngModelChange","ngModel"],["for","fono"],["type","text","pInputText","","id","fono","name","fono",1,"w-full",3,"ngModelChange","ngModel"],[1,"field","col-6"],["for","numLoteInicio"],["type","text","pInputText","","id","numLoteInicio","name","numLoteInicio",1,"w-full",3,"ngModelChange","ngModel"],["for","numLoteFin"],["type","text","pInputText","","id","numLoteFin","name","numLoteFin",1,"w-full",3,"ngModelChange","ngModel"],[1,"p-error"],[1,"pt-3"],["alt","Vista previa de la imagen",2,"width","100%","height","350px",3,"src"],[1,"card","mt-3","flex","flex-column","justify-content-center","align-items-center",2,"height","30vh"],["ariaLabel","loading"],[1,"loader","ps-5"],[1,"grid","custom-footer"],[1,"col-6","text-left"],["pRipple","","label","Guardar","icon","pi pi-check","severity","primary",3,"click","text","raised","hidden"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","warning",3,"click","text","raised"],[1,"saving"]],template:function(t,a){t&1&&(n(0,"p-dialog",0),S("visibleChange",function(C){return x(a.estado,C)||(a.estado=C),C}),_(1,$t,3,2,"ng-template",1)(2,ti,6,6,"ng-template",2),i()),t&2&&(F(y(4,At)),v("visible",a.estado),d("modal",!0))},dependencies:[U,A,T,P,Ee,ge,ue,k,L,oe,ae,le,G,z,He,D,R,W,j,me,se,B]});let o=l;return o})();var ii=()=>({width:"450px"}),ni=()=>({width:"100%"}),ri=()=>[10,25,50],oi=()=>["nombre","direccion","fono"],ai=()=>({"min-width":"75rem"}),li=o=>({"background-color":o});function si(o,l){if(o&1){let r=w();n(0,"div",17)(1,"div",18)(2,"p-button",19),f("click",function(){u(r);let t=c(2);return g(t.create())}),i(),n(3,"p-button",20),f("click",function(){u(r);let t=c(2);return g(t.exportXLS())}),i()(),n(4,"div",21)(5,"span",22),p(6,"i",23),n(7,"input",24),f("input",function(t){u(r),c();let a=Se(12);return g(a.filterGlobal(t.target.value,"contains"))}),i()()()()}o&2&&(s(2),d("outlined",!0)("raised",!0),s(),d("outlined",!0)("raised",!0)("text",!0))}function mi(o,l){o&1&&(n(0,"tr")(1,"th",25),m(2," FOTO "),p(3,"p-sortIcon",26),i(),n(4,"th",27),m(5," SUCURSAL "),p(6,"p-sortIcon",28),i(),n(7,"th",29),m(8," N\xBA Lote"),p(9,"p-sortIcon",30),i(),n(10,"th",31),m(11," REGIONAL"),p(12,"p-sortIcon",32),i(),n(13,"th",33),m(14," OPCIONES "),i()())}function di(o,l){if(o&1){let r=w();n(0,"tr",34)(1,"td",35),p(2,"img",36),i(),n(3,"td")(4,"span",37),m(5,"NOMBRE: "),i(),m(6),p(7,"br"),n(8,"span",37),m(9,"DIRECCI\xD3N: "),i(),m(10),p(11,"br"),n(12,"span",37),m(13,"TEL\xC9FONO: "),i(),m(14),i(),n(15,"td")(16,"span",37),m(17,"INICIO: "),i(),m(18),p(19,"br"),n(20,"span",37),m(21,"FIN: "),i(),m(22),i(),n(23,"td"),m(24),i(),n(25,"td")(26,"p-button",38),f("click",function(){let t=u(r).$implicit,a=c(2);return g(a.showReport(t.id))}),i(),n(27,"p-button",39),f("click",function(){let t=u(r).$implicit,a=c(2);return g(a.showEdit(t.id))}),i(),n(28,"p-button",40),f("click",function(){let t=u(r).$implicit,a=c(2);return g(a.showDelete(t.id))}),i()()()}if(o&2){let r=l.$implicit;d("ngStyle",je(14,li,r.estado===1?"#fff":"#fdf4f4")),s(2),d("src",r.foto,O),s(4),N("",r.nombre," "),s(4),N("",r.direccion," "),s(4),N("",r.fono," "),s(4),V(r.numLoteInicio),s(4),N("",r.numLoteFin," "),s(2),V(r.regional.nombre),s(2),d("rounded",!0)("outlined",!0),s(),d("rounded",!0)("outlined",!0),s(),d("rounded",!0)("outlined",!0)}}function ci(o,l){if(o&1){let r=w();n(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"label",10),m(7,"Regional:"),i()(),n(8,"div",11)(9,"p-dropdown",12),f("onChange",function(t){u(r);let a=c();return g(a.filter(t.value))})("onClear",function(){u(r);let t=c();return g(t.clearFilter())}),i()()()()(),p(10,"hr"),n(11,"p-table",13,0),_(13,si,8,5,"ng-template",14)(14,mi,15,0,"ng-template",15)(15,di,29,16,"ng-template",16),i()()()}if(o&2){let r=c();s(9),F(y(12,ni)),d("options",r.regionales)("showClear",!0),s(2),d("value",r.sucursales)("rows",10)("rowsPerPageOptions",y(13,ri))("paginator",!0)("globalFilterFields",y(14,oi))("tableStyle",y(15,ai))("rowHover",!0)("showCurrentPageReport",!0)}}function pi(o,l){o&1&&(n(0,"div")(1,"div",41),p(2,"p-progressSpinner",42),n(3,"span",43),m(4,"MINEXA S.R.L."),i()()())}var tt=(()=>{let l=class l{constructor(e,t,a){this.sucursalService=e,this.messageService=t,this.confirmationService=a,this.loading=!1}ngOnInit(){this.show()}show(){this.loading=!0,console.log("REQUEST->index"),this.sucursalService.index().subscribe({next:e=>{this.regionales=e.regionales,this.sucursales=e.sucursales,this.data=e.sucursales,console.log("RESPONSE->index",e)},error:e=>{this.sucursales=[],this.messageService.add({severity:"error",summary:"ERROR",detail:e.error.message}),console.log("RESPONSE->index Error en:",e.error)},complete:()=>{this.loading=!1}})}create(){this.dialog.showCreate()}showEdit(e){this.dialog.showEdit(e)}showDelete(e){this.confirmationService.confirm({message:"Est\xE1 seguro de eliminar el Registro...?",header:"Confirmar",icon:"pi pi-exclamation-triangle",accept:()=>{console.log("REQUEST->destroy",e),this.sucursalService.destroy(e).subscribe({next:t=>{this.sucursales=this.sucursales.filter(a=>a.id!==e),this.messageService.add({severity:"success",summary:"RESPONSE",detail:t.msg,life:3e3}),console.log("RESPONSE->destroy",t)},error:t=>{this.messageService.add({severity:"error",summary:"ERROR",detail:t.error.message}),console.log("RESPONSE->destroy Error en:",t.error)}})}})}showReport(e){alert("showReport"+e)}exportXLS(){alert("exportXLS")}filter(e){this.sucursales=this.data.filter(t=>t.idRegional==e)}clearFilter(){this.sucursales=this.data}};l.\u0275fac=function(t){return new(t||l)(E(Ne),E(M),E(q))},l.\u0275cmp=b({type:l,selectors:[["app-index-sucursal"]],viewQuery:function(t,a){if(t&1&&Z(xe,5),t&2){let h;$(h=ee())&&(a.dialog=h.first)}},standalone:!0,features:[te([M,q]),I],decls:11,vars:5,consts:[["dt",""],[1,"card-header","shadow-5"],[4,"ngIf"],[1,"card-footer"],[3,"changeSucursal"],[1,"card-body","shadow-5"],[1,"grid","flex","justify-content-center"],[1,"col-10"],[1,"grid","field"],[1,"col-4","text-right","pt-2"],["for","regional"],[1,"col-6"],["id","regional","optionValue","id","optionLabel","nombre","placeholder","TODOS",3,"onChange","onClear","options","showClear"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","rowsPerPageOptions","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"grid"],[1,"col-12","sm:col-8"],["pRipple","","severity","primary","label","Nuevo","icon","pi pi-plus",1,"ml-2",3,"click","outlined","raised"],["pRipple","","severity","info","label","Reporte","icon","pi pi-print",1,"ml-2",3,"click","outlined","raised","text"],[1,"col-12","sm:col-4","text-right"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["pSortableColumn","id",1,"text-center",2,"width","10%"],["field","id"],["pSortableColumn","nombre",2,"width","30%"],["field","nombre"],["pSortableColumn","numLoteInicio",2,"width","20%"],["field","numLote"],["pSortableColumn","regional",2,"width","20%"],["field","regional"],[2,"width","20%"],[3,"ngStyle"],[1,"text-center"],[2,"width","70px","height","70px","border-radius","50px","border","3px solid #dcdcdc",3,"src"],[1,"prefijoRow"],["pRipple","","icon","pi pi-print","severity","info",1,"mr-2",3,"click","rounded","outlined"],["pRipple","","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded","outlined"],["pRipple","","icon","pi pi-trash","severity","danger",3,"click","rounded","outlined"],[1,"card","mt-3","flex","flex-column","justify-content-center","align-items-center",2,"height","50vh"],["ariaLabel","loading"],[1,"loader","ps-5"]],template:function(t,a){t&1&&(n(0,"div",1)(1,"h3"),m(2,"Gesti\xF3n de Sucursales"),i()(),p(3,"hr"),_(4,ci,16,16,"div",2),p(5,"hr"),n(6,"div",3)(7,"app-dialog-sucursal",4),f("changeSucursal",function(){return a.show()}),i(),p(8,"p-confirmDialog")(9,"p-toast"),i(),_(10,pi,5,0,"div",2)),t&2&&(s(4),d("ngIf",!a.loading),s(4),F(y(4,ii)),s(2),d("ngIf",a.loading))},dependencies:[U,A,pe,ce,k,be,Ie,G,z,D,R,B,de,Me,ye,T,P,We,W,j,L,xe]});let o=l;return o})();var Ln=[{path:"empresa/edit",component:$e},{path:"sucursal/index",component:tt},{path:"sucursal/dialog",component:xe},{path:"mineral/index",component:Ye}];export{Ln as RecursoMaterialRoutes};
