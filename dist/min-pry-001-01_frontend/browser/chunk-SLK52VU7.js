import{b as pe}from"./chunk-2RUBCXOU.js";import{a as we,b as Te,d as K,e as ye,f as be,g as Re,h as Ie,i as q,j as ce,k as de,l as ee,m as Y}from"./chunk-ZSPJV2X2.js";import{d as ve,f as Z,g as W,h as Se}from"./chunk-64FVGRX5.js";import{c as Ce,d as se}from"./chunk-AIZYAHQP.js";import{a as Ee,b as Q}from"./chunk-AQMLQG24.js";import"./chunk-R25NPE2E.js";import{$ as j,E as J,I as V,N,_ as U,a as ge,aa as $,ba as G,t as fe,v as xe,w as he,z as k}from"./chunk-KZFJR7EH.js";import{$ as L,$a as P,Ab as E,Bb as ue,Cb as A,Db as h,Ea as s,Fa as b,Mb as w,Nb as T,R as ie,Ua as f,W as me,Wa as m,Za as R,ab as I,bb as D,cb as O,db as n,eb as i,fb as d,ja as u,jb as v,ka as g,kb as x,lb as p,nc as z,pb as re,qb as oe,qc as B,rb as ae,rc as H,sa as ne,sb as X,tb as a,ub as F,vb as _,wb as le,xb as _e,yb as S,zb as C}from"./chunk-VURLBMTQ.js";var Xe=()=>({width:"85vw"}),ze=()=>({width:"100%"});function Je(o,l){o&1&&(n(0,"tr")(1,"th",13),a(2,"LOTE"),i(),n(3,"th",14),a(4,"FECHA"),i(),n(5,"th",15),a(6,"MINERAL"),i(),n(7,"th",14),a(8,"PESO"),i(),n(9,"th",16),a(10,"LEY"),i(),n(11,"th",17),d(12,"p-tableHeaderCheckbox"),i()())}function Ze(o,l){if(o&1&&(n(0,"span",18),a(1),i(),a(2),d(3,"br")),o&2){let e=l.$implicit;s(),_("",e.mineral.abreviatura," : "),s(),le("",e.valor," ",e.unidad_medida_ley.abreviatura,"")}}function $e(o,l){if(o&1&&D(0,Ze,4,3,null,null,I),o&2){let e=l.$implicit;O(e.detalles)}}function et(o,l){if(o&1&&(n(0,"tr")(1,"td")(2,"h2"),a(3),i()(),n(4,"td")(5,"span",18),a(6,"FECHA: "),i(),a(7),w(8,"date"),d(9,"br"),n(10,"span",18),a(11,"HORA: "),i(),a(12),w(13,"date"),i(),n(14,"td")(15,"span",18),a(16,"NOMBRE: "),i(),a(17),d(18,"br"),n(19,"span",18),a(20,"TARA: "),i(),a(21),d(22,"br"),n(23,"span",18),a(24,"HUMEDAD: "),i(),a(25),i(),n(26,"td")(27,"span",18),a(28,"K-BRUTO: "),i(),a(29),d(30,"br"),n(31,"span",18),a(32,"K-NETO: "),i(),a(33),i(),n(34,"td"),D(35,$e,2,0,null,null,I),i(),n(37,"td",19),d(38,"p-tableCheckbox",20),i()()),o&2){let e=l.$implicit;s(3),F(e.numLote),s(4),_(" ",T(8,9,e.fechaHora,"dd/MM/yyyy"),""),s(5),_(" ",T(13,12,e.fechaHora,"HH:mm:ss")," "),s(5),_(" ",e.mineral.nombre,""),s(4),_(" ",e.tara,""),s(4),_(" ",e.humedad," "),s(4),_(" ",e.pesoBruto,""),s(4),_(" ",e.pesoBruto-(e.tara+e.humedad)," "),s(2),O(e.leyes),s(3),m("value",e)}}function tt(o,l){if(o&1){let e=v();n(0,"div",9)(1,"p-table",10),E("selectionChange",function(t){u(e);let c=p();return C(c.selected,t)||(c.selected=t),g(t)}),f(2,Je,13,0,"ng-template",11)(3,et,39,15,"ng-template",12),i()()}if(o&2){let e=p();s(),m("value",e.lotes),S("selection",e.selected),m("tableStyle",h(3,ze))}}function it(o,l){if(o&1){let e=v();n(0,"div",21)(1,"p-button",22),x("click",function(){u(e);let t=p();return g(t.save())}),i(),n(2,"p-button",23),x("click",function(){u(e);let t=p();return g(t.cancel())}),i()()}if(o&2){let e=p();s(),m("text",!0)("raised",!0)("hidden",e.saving),s(),m("text",!0)("raised",!0)}}var Ae=(()=>{let l=class l{constructor(){this.changeAddLote=new ne}create(r,t){this.lotes=r,this.selected=t,this.estado=!0,this.saving=!1}save(){this.changeAddLote.emit(this.selected),this.estado=!1}cancel(){this.estado=!1}};l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=L({type:l,selectors:[["app-modal-addLote"]],outputs:{changeAddLote:"changeAddLote"},standalone:!0,features:[A],decls:19,vars:6,consts:[["closeOnEscape","true","closable","true","header","ADICI\xD3N DE LOTES","styleClass","p-fluid dialog-responsive custom-header",3,"visibleChange","visible","modal","draggable"],[1,"grid","justify-content-center"],[1,"col-12","sm:col-6"],[1,"grid","field"],[1,"col-4","text-right","pt-2"],[1,"col-8"],["id","idRegional","optionValue","id","optionLabel","nombre"],["pTemplate","content"],["pTemplate","footer"],[1,"card-body","shadow-3"],["dataKey","id",3,"selectionChange","value","selection","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"width","10%"],[2,"width","20%"],[2,"width","25%"],[2,"width","15%"],[1,"text-center",2,"width","10%"],[1,"prefijoRow"],[1,"text-center"],[3,"value"],[1,"custom-footer"],["pRipple","","label","Agregar","icon","pi pi-plus","severity","primary",3,"click","text","raised","hidden"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","warning",3,"click","text","raised"]],template:function(t,c){t&1&&(n(0,"p-dialog",0),E("visibleChange",function(M){return C(c.estado,M)||(c.estado=M),M}),d(1,"hr"),n(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"label"),a(7,"Mineral:"),i()(),n(8,"div",5),d(9,"p-dropdown",6),i()(),n(10,"div",3)(11,"div",4)(12,"label"),a(13,"Fecha:"),i()(),n(14,"div",5),d(15,"p-dropdown",6),i()()()(),d(16,"hr"),f(17,tt,4,4,"ng-template",7)(18,it,3,5,"ng-template",8),i()),t&2&&(R(h(5,Xe)),S("visible",c.estado),m("modal",!0)("draggable",!1))},dependencies:[Y,W,Z,N,pe,q,K,Re,Ie,H,B,de,ce,k,j,U,G,se,Q]});let o=l;return o})();var Le=(()=>{let l=class l{constructor(r){this.httpClient=r,this.url="http://127.0.0.1:8000/api/registro/transito/transferencia/"}index(){return this.httpClient.get(this.url+"index")}create(){return this.httpClient.get(this.url+"create")}store(r){return this.httpClient.post(this.url+"store",r)}edit(r){return this.httpClient.get(this.url+"edit/"+r)}update(r){return this.httpClient.put(this.url+"update",r)}destroy(r){return this.httpClient.delete(this.url+"destroy/"+r)}};l.\u0275fac=function(t){return new(t||l)(me(ge))},l.\u0275prov=ie({token:l,factory:l.\u0275fac,providedIn:"root"});let o=l;return o})();var je=(()=>{let l=class l{getFechaHora(){return new Date}formatNumLote(r){let t;return r<1e4?t="0"+r:r<1e3?t="00"+r:r<100?t="000"+r:r<10?t="0000"+r:t=r,t}};l.\u0275fac=function(t){return new(t||l)},l.\u0275prov=ie({token:l,factory:l.\u0275fac,providedIn:"root"});let o=l;return o})();var st=()=>({width:"75vw"}),ct=()=>[10,25,50],dt=()=>["numLote","fechaHora","cooperativa.nombre","mineral.nombre","pesoBruto","estado"],pt=()=>({"min-width":"75rem"}),mt=()=>({width:"150px"});function _t(o,l){o&1&&(n(0,"small",24),a(1,"Requerido."),i())}function ut(o,l){o&1&&(n(0,"small",24),a(1,"Requerido."),i())}function gt(o,l){o&1&&(n(0,"small",24),a(1,"Requerido."),i())}function ft(o,l){o&1&&(n(0,"small",24),a(1,"Requerido."),i())}function xt(o,l){if(o&1){let e=v();n(0,"div",7)(1,"div",25)(2,"p-button",26),x("click",function(){u(e);let t=p(3);return g(t.showAddLote())}),i()(),n(3,"div",27)(4,"span",28),d(5,"i",29),n(6,"input",30),x("input",function(t){u(e),p();let c=X(48);return g(c.filterGlobal(t.target.value,"contains"))}),i()()()()}o&2&&(s(2),R(h(5,mt)),m("outlined",!0)("raised",!0)("text",!0))}function ht(o,l){o&1&&(n(0,"tr")(1,"th",31),a(2," LOTE "),i(),n(3,"th",32),a(4," MINERAL "),i(),n(5,"th",32),a(6," PESO-BRUTO "),i(),n(7,"th",33),a(8," LEY "),i(),n(9,"th",34),a(10," OPCIONES "),i()())}function vt(o,l){if(o&1&&(n(0,"span",35),a(1),i(),a(2),d(3,"br")),o&2){let e=l.$implicit;s(),_("",e.mineral.abreviatura," : "),s(),le("",e.valor," ",e.unidad_medida_ley.abreviatura,"")}}function St(o,l){if(o&1&&D(0,vt,4,3,null,null,I),o&2){let e=l.$implicit;O(e.detalles)}}function Ct(o,l){if(o&1){let e=v();n(0,"tr")(1,"td")(2,"h2"),a(3),i()(),n(4,"td")(5,"span",35),a(6,"NOMBRE: "),i(),a(7),d(8,"br"),n(9,"span",35),a(10,"TARA: "),i(),a(11),d(12,"br"),n(13,"span",35),a(14,"HUMEDAD: "),i(),a(15),i(),n(16,"td")(17,"span",35),a(18,"K-BRUTO: "),i(),a(19),d(20,"br"),n(21,"span",35),a(22,"K-NETO: "),i(),a(23),i(),n(24,"td"),D(25,St,2,0,null,null,I),i(),n(27,"td")(28,"p-button",36),x("click",function(){let t=u(e).$implicit,c=p(3);return g(c.deleteLote(t.id))}),i()()()}if(o&2){let e=l.$implicit;s(3),F(e.numLote),s(4),_(" ",e.mineral.nombre,""),s(4),_(" ",e.tara,""),s(4),_(" ",e.humedad," "),s(4),_(" ",e.pesoBruto,""),s(4),_(" ",e.pesoBruto-(e.tara+e.humedad)," "),s(2),O(e.leyes),s(3),m("rounded",!0)("outlined",!0)}}function Et(o,l){o&1&&(n(0,"small",24),a(1,"Requerido. Alfanum\xE9rico de: 1-500"),i())}function wt(o,l){if(o&1){let e=v();n(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"h5"),a(7,"Sucursal Origen"),i(),d(8,"hr"),n(9,"div",10)(10,"div",11)(11,"label"),a(12,"Regional:"),i()(),n(13,"div",12)(14,"p-dropdown",13),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.transferencia.idRegionalOrigen,t)||(c.transferencia.idRegionalOrigen=t),g(t)}),x("onChange",function(t){u(e);let c=p(2);return g(c.loadSucursalesOrigen(t.value))})("onChange",function(){u(e);let t=p(2);return g(t.clearDetail())}),i(),f(15,_t,2,0,"small",14),i()(),n(16,"div",10)(17,"div",11)(18,"label"),a(19,"Sucursal:"),i()(),n(20,"div",12)(21,"p-dropdown",15),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.transferencia.idSucursalOrigen,t)||(c.transferencia.idSucursalOrigen=t),g(t)}),x("onChange",function(t){u(e);let c=p(2);return g(c.filterBySucursal(t.value))}),i(),f(22,ut,2,0,"small",14),i()()()(),n(23,"div",8)(24,"div",9)(25,"h5"),a(26,"Sucursal Destino"),i(),d(27,"hr"),n(28,"div",10)(29,"div",11)(30,"label"),a(31,"Regional:"),i()(),n(32,"div",12)(33,"p-dropdown",13),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.transferencia.idRegionalDestino,t)||(c.transferencia.idRegionalDestino=t),g(t)}),x("onChange",function(t){u(e);let c=p(2);return g(c.loadSucursalesDestino(t.value))}),i(),f(34,gt,2,0,"small",14),i()(),n(35,"div",10)(36,"div",11)(37,"label"),a(38,"Sucursal:"),i()(),n(39,"div",12)(40,"p-dropdown",16),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.transferencia.idSucursalDestino,t)||(c.transferencia.idSucursalDestino=t),g(t)}),i(),f(41,ft,2,0,"small",14),i()()()()()()(),d(42,"hr"),n(43,"div",17)(44,"h5"),a(45,"Lotes a transferir"),i(),d(46,"hr"),n(47,"p-table",18,0),f(49,xt,7,6,"ng-template",19)(50,ht,11,0,"ng-template",20)(51,Ct,29,8,"ng-template",21),i(),n(52,"div",22)(53,"h5"),a(54,"Descripci\xF3n de transferencia:"),i(),n(55,"textarea",23),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.transferencia.descripcionOrigen,t)||(c.transferencia.descripcionOrigen=t),g(t)}),i(),f(56,Et,2,0,"small",14),i()(),n(57,"div")(58,"p")(59,"b"),a(60,"USUARIO: "),i(),a(61),d(62,"br"),n(63,"b"),a(64,"FECHA: "),i(),a(65),w(66,"date"),n(67,"b"),a(68,"HORA: "),i(),a(69),w(70,"date"),i()()()}if(o&2){let e=p(2);s(14),m("options",e.regionalesOrigen),S("ngModel",e.transferencia.idRegionalOrigen),s(),m("ngIf",!e.valIdRegionalOrigen()),s(6),m("options",e.sucursalesOrigen),S("ngModel",e.transferencia.idSucursalOrigen),s(),m("ngIf",!e.valIdSucursalOrigen()),s(11),m("options",e.regionalesDestino),S("ngModel",e.transferencia.idRegionalDestino),s(),m("ngIf",!e.valIdRegionalDestino()),s(6),m("options",e.sucursalesDestino),S("ngModel",e.transferencia.idSucursalDestino),s(),m("ngIf",!e.valIdSucursalDestino()),s(6),m("value",e.transferenciaLotes)("rows",10)("rowsPerPageOptions",h(33,ct))("paginator",!0)("globalFilterFields",h(34,dt))("tableStyle",h(35,pt))("rowHover",!0)("showCurrentPageReport",!0),s(8),S("ngModel",e.transferencia.descripcionOrigen),s(),m("ngIf",!e.valDescripcion()),s(5),_e(" ",e.usuario.persona.nombre," ",e.usuario.persona.apePaterno," ",e.usuario.persona.apeMaterno,""),s(4),_(" ",T(66,27,e.fechaHora,"dd/MM/yyyy")," "),s(4),_(" ",T(70,30,e.fechaHora,"HH:mm:ss")," ")}}function Tt(o,l){o&1&&(n(0,"div")(1,"div",37),d(2,"p-progressSpinner",38),n(3,"span",39),a(4,"Cargando..."),i()()())}function yt(o,l){if(o&1&&(d(0,"hr"),f(1,wt,71,36,"div",4)(2,Tt,5,0,"div",4)),o&2){let e=p();s(),m("ngIf",!e.loading),s(),m("ngIf",e.loading)}}function bt(o,l){o&1&&(n(0,"div")(1,"h5"),a(2,"Guardando..."),i(),d(3,"span",46),i())}function Rt(o,l){if(o&1){let e=v();n(0,"app-modal-addLote",40),x("changeAddLote",function(t){u(e);let c=p();return g(c.updateDetail(t))}),i(),n(1,"div",41)(2,"div",42),f(3,bt,4,0,"div",4),i(),n(4,"div",43)(5,"p-button",44),x("click",function(){u(e);let t=p();return g(t.save())}),i(),n(6,"p-button",45),x("click",function(){u(e);let t=p();return g(t.cancel())}),i()()()}if(o&2){let e=p();s(3),m("ngIf",e.saving),s(2),m("text",!0)("raised",!0)("hidden",e.saving),s(),m("text",!0)("raised",!0)}}var ke=(()=>{let l=class l{constructor(r,t,c,y){this.principalService=r,this.messageService=t,this.transferenciaService=c,this.comunService=y,this.changeTransferencia=new ne}create(){this.estado=!0,this.loading=!0,this.saving=!1,console.log("REQUEST->create"),this.transferenciaService.create().subscribe({next:r=>{this.regionalesOrigen=r.regionalesOrigen,this.sucursalesDestino=[],this.regionalesDestino=r.regionalesDestino,this.sucursalesDestino=[],this.transferencia={fechaHoraOrigen:"",descripcionOrigen:"",lotes:[]},this.transferenciaLotes=[],this.lotes=r.lotes,this.data=r.lotes,this.usuario=this.principalService.getUsuarioStorage(),this.initReloj(),console.log("RESPONSE->create",r)},error:r=>{this.messageService.add({severity:"error",summary:"ERROR",detail:r.error.message}),console.log("RESPONSE->create Error en:",r.error)},complete:()=>{this.loading=!1}})}edit(r){this.estado=!0,this.loading=!0,this.saving=!1,console.log("REQUEST->edit",r),this.transferenciaService.edit(r).subscribe({next:t=>{this.regionalesOrigen=t.regionalesOrigen,this.loadSucursalesOrigen(t.transferencia.idRegionalOrigen),this.regionalesDestino=t.regionalesDestino,this.loadSucursalesDestino(t.transferencia.idRegionalDestino),this.transferencia=t.transferencia,this.transferenciaLotes=this.loadDetail(t.lotes,t.transferencia.lotes),this.lotes=t.lotes,this.data=t.lotes,this.usuario=this.principalService.getUsuarioStorage(),this.initReloj(),console.log("RESPONSE->edit",t)},error:t=>{this.messageService.add({severity:"error",summary:"ERROR",detail:t.error.message}),console.log("RESPONSE->edit Error en:",t.error)},complete:()=>{this.loading=!1}})}save(){this.prepareData(),this.validate()?(this.saving=!0,this.transferencia.id?(console.log("REQUEST->update",this.transferencia),this.transferenciaService.update(this.transferencia).subscribe({next:r=>{this.transferencia=r.transferencia,this.changeTransferencia.emit(),this.messageService.add({severity:"success",summary:"CONFIRMACI\xD3N",detail:r.msg}),console.log("RESPONSE->update",r),this.estado=!1},error:r=>{this.messageService.add({severity:"error",summary:"ERROR",detail:r.error.message}),console.log("RESPONSE->update Error en:",r.error)}})):(console.log("REQUEST->store",this.transferencia),this.transferenciaService.store(this.transferencia).subscribe({next:r=>{this.transferencia=r.transferencia,this.changeTransferencia.emit(),this.messageService.add({severity:"success",summary:"CONFIRMACI\xD3N",detail:r.msg}),console.log("RESPONSE->store",r),this.estado=!1},error:r=>{this.messageService.add({severity:"error",summary:"ERROR",detail:r.error.message}),console.log("RESPONSE->store Error en:",r.error)}}))):(this.messageService.add({severity:"error",summary:"ERROR",detail:"Datos incorrectos...!!"}),console.log("Datos Incorrectos...!!"))}showAddLote(){this.valIdRegionalOrigen()&&this.valIdSucursalOrigen()?this.dialog.create(this.lotes,this.transferenciaLotes):alert("SELECCIONE LA SUCURSAL ORIGEN...!!")}deleteLote(r){this.transferenciaLotes=this.transferenciaLotes.filter(t=>t.id!==r)}loadSucursalesOrigen(r){let t=this.regionalesOrigen.find(c=>c.id===r);this.sucursalesOrigen=t?t.sucursales:[]}loadSucursalesDestino(r){let t=this.regionalesDestino.find(c=>c.id===r);this.sucursalesDestino=t?t.sucursales:[]}filterBySucursal(r){this.lotes=this.data.filter(t=>t.idSucursal==r),this.transferenciaLotes=[]}cancel(){this.estado=!1}prepareData(){this.transferencia.idUsuarioOrigen=this.usuario.id,this.transferencia.fechaHoraOrigen=this.fechaHora,this.transferencia.lotes=this.transferenciaLotes.map(r=>({idLote:r.id}))}loadDetail(r,t){let c=[];return r.forEach(y=>{t.forEach(M=>{y.id==M.idLote&&c.push(y)})}),c}clearDetail(){this.transferenciaLotes=[],this.transferencia.idSucursalOrigen=0}updateDetail(r){this.transferenciaLotes=r}initReloj(){setInterval(()=>{this.fechaHora=new Date},1e3)}valIdRegionalOrigen(){return!!this.transferencia.idRegionalOrigen}valIdSucursalOrigen(){return!!this.transferencia.idSucursalOrigen}valIdRegionalDestino(){return!!this.transferencia.idRegionalDestino}valIdSucursalDestino(){return!!this.transferencia.idSucursalDestino}valIdLotes(){return this.transferencia.lotes.length>0}valDescripcion(){return!!/^[\w áéíóúüñÁÉÍÓÚÜÑ.-]{1,500}$/.test(this.transferencia.descripcionOrigen)}validate(){return this.valIdRegionalOrigen()&&this.valIdSucursalOrigen()&&this.valIdRegionalDestino()&&this.valIdSucursalDestino()&&this.valIdLotes()&&this.valDescripcion()}};l.\u0275fac=function(t){return new(t||l)(b(Se),b(V),b(Le),b(je))},l.\u0275cmp=L({type:l,selectors:[["app-dialog-transferencia"]],viewQuery:function(t,c){if(t&1&&re(Ae,5),t&2){let y;oe(y=ae())&&(c.dialog=y.first)}},outputs:{changeTransferencia:"changeTransferencia"},standalone:!0,features:[A],decls:3,vars:5,consts:[["dt",""],["closeOnEscape","true","closable","true","header","REGISTRO DE TRANSFERENCIA","styleClass","p-fluid dialog-responsive custom-header",3,"visibleChange","visible","modal"],["pTemplate","content"],["pTemplate","footer"],[4,"ngIf"],[1,"grid","justify-content-center"],[1,"col-12","sm:col-10"],[1,"grid"],[1,"col-12","sm:col-6"],[1,"card"],[1,"grid","field"],[1,"col-4","text-right","pt-2"],[1,"col-8"],["id","idRegional","optionValue","id","optionLabel","nombre",3,"ngModelChange","onChange","options","ngModel"],["class","p-error",4,"ngIf"],["id","idSucursal","optionValue","id","optionLabel","nombre",3,"ngModelChange","onChange","options","ngModel"],["id","idSucursal","optionValue","id","optionLabel","nombre",3,"ngModelChange","options","ngModel"],[1,"card","shadow-3"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","rowsPerPageOptions","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"field"],["pInputTextarea","","id","descripcion","rows","5","cols","20",1,"w-full",3,"ngModelChange","ngModel"],[1,"p-error"],[1,"col-12","md:col-8"],["pRipple","","severity","primary","label","Agregar Lote","icon","pi pi-plus",3,"click","outlined","raised","text"],[1,"col-12","md:col-4","text-right"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],[2,"width","15%"],[2,"width","30%"],[2,"width","20%"],[2,"width","5%"],[1,"prefijoRow"],["pRipple","","icon","pi pi-trash","severity","danger",3,"click","rounded","outlined"],[1,"card","mt-3","flex","flex-column","justify-content-center","align-items-center",2,"height","30vh"],["ariaLabel","loading"],[1,"loader","ps-5"],[3,"changeAddLote"],[1,"grid","custom-footer"],[1,"col-6","text-left"],[1,"col-6"],["pRipple","","label","Guardar","icon","pi pi-check","severity","primary",3,"click","text","raised","hidden"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","warning",3,"click","text","raised"],[1,"saving"]],template:function(t,c){t&1&&(n(0,"p-dialog",1),E("visibleChange",function(M){return C(c.estado,M)||(c.estado=M),M}),f(1,yt,3,2,"ng-template",2)(2,Rt,7,6,"ng-template",3),i()),t&2&&(R(h(4,st)),S("visible",c.estado),m("modal",!0))},dependencies:[q,K,N,Y,ee,W,Z,H,z,B,pe,de,ce,k,fe,xe,he,j,U,G,$,se,Ce,Q,Ae]});let o=l;return o})();var Ot=()=>({width:"450px"}),Ge=()=>({width:"100%"}),Mt=()=>[10,25,50],Vt=()=>["numLote","fechaHora","cooperativa.nombre","mineral.nombre","pesoBruto","estado"],Lt=()=>({"min-width":"75rem"});function Pt(o,l){if(o&1){let e=v();n(0,"div",17)(1,"div",18)(2,"p-button",19),x("click",function(){u(e);let t=p(2);return g(t.showCreate())}),i(),n(3,"p-button",20),x("click",function(){u(e);let t=p(2);return g(t.showReportGral())}),i()(),n(4,"div",21)(5,"span",22),d(6,"i",23),n(7,"input",24),x("input",function(t){u(e),p();let c=X(17);return g(c.filterGlobal(t.target.value,"contains"))}),i()()()()}o&2&&(s(2),m("outlined",!0)("raised",!0)("text",!0),s(),m("outlined",!0)("raised",!0)("text",!0))}function Ft(o,l){o&1&&(n(0,"tr")(1,"th",25),a(2," DATOS-ORIGEN "),d(3,"p-sortIcon",26),i(),n(4,"th",27),a(5," DATOS-DESTINO "),d(6,"p-sortIcon",28),i(),n(7,"th",27),a(8," ESTADO-TRANSFERE."),d(9,"p-sortIcon",28),i(),n(10,"th",27),a(11," ESTADO-RECEPCION "),d(12,"p-sortIcon",28),i(),n(13,"th",29),a(14," OPCIONES "),i()())}function At(o,l){if(o&1&&(a(0),d(1,"br")),o&2){let e=p().$implicit;_(" ",e.usuario_destino==null?null:e.usuario_destino.login," ")}}function Bt(o,l){o&1&&(n(0,"font",34),a(1,"Pendiente"),i(),d(2,"br"))}function Ht(o,l){if(o&1&&(a(0),w(1,"date"),d(2,"br")),o&2){let e=p().$implicit;_(" ",T(1,1,e.fechaHoraDestino,"dd/MM/yyyy"),"")}}function kt(o,l){o&1&&(n(0,"font",34),a(1,"Pendiente"),i(),d(2,"br"))}function Nt(o,l){if(o&1&&(a(0),w(1,"date")),o&2){let e=p().$implicit;_(" ",T(1,1,e.fechaHoraDestino,"HH:mm:ss")," ")}}function Wt(o,l){o&1&&(n(0,"font",34),a(1,"Pendiente"),i(),d(2,"br"))}function Ut(o,l){if(o&1&&(n(0,"span",30),a(1,"Lote: "),i(),n(2,"b"),a(3),i(),a(4),d(5,"br")),o&2){let e=l.$implicit;s(3),_("",e.lote.numLote," "),s(),F(e.estadoTransferencia)}}function jt(o,l){if(o&1&&(a(0),d(1,"br")),o&2){let e=p().$implicit;_(" ",e.estadoRecepcion,"")}}function Gt(o,l){o&1&&(n(0,"font",34),a(1,"Pendiente"),i(),d(2,"br"))}function Qt(o,l){if(o&1&&(n(0,"span",30),a(1,"Lote: "),i(),n(2,"b"),a(3),i(),f(4,jt,2,1,"br")(5,Gt,3,0)),o&2){let e=l.$implicit;s(3),_("",e.lote.numLote," "),s(),P(e.estadoRecepcion=="RECIBIDO"?4:5)}}function Kt(o,l){if(o&1){let e=v();n(0,"tr")(1,"td")(2,"span",30),a(3,"REGIONAL: "),i(),a(4),d(5,"br"),n(6,"span",30),a(7,"SUCURSAL: "),i(),a(8),d(9,"hr"),n(10,"span",30),a(11,"USUARIO: "),i(),a(12),d(13,"br"),n(14,"span",30),a(15,"FECHA: "),i(),a(16),w(17,"date"),d(18,"br"),n(19,"span",30),a(20,"HORA: "),i(),a(21),w(22,"date"),i(),n(23,"td")(24,"span",30),a(25,"REGIONAL: "),i(),a(26),d(27,"br"),n(28,"span",30),a(29,"SUCURSAL: "),i(),a(30),d(31,"hr"),n(32,"span",30),a(33,"USUARIO: "),i(),f(34,At,2,1,"br")(35,Bt,3,0),n(36,"span",30),a(37,"FECHA: "),i(),f(38,Ht,3,4,"br")(39,kt,3,0),n(40,"span",30),a(41,"HORA: "),i(),f(42,Nt,2,4)(43,Wt,3,0),i(),n(44,"td"),D(45,Ut,6,2,null,null,I),i(),n(47,"td"),D(48,Qt,6,2,null,null,I),i(),n(50,"td")(51,"p-button",31),x("click",function(){let t=u(e).$implicit,c=p(2);return g(c.showReport(t.id))}),i(),n(52,"p-button",32),x("click",function(){let t=u(e).$implicit,c=p(2);return g(c.showEdit(t.id))}),i(),n(53,"p-button",33),x("click",function(){let t=u(e).$implicit,c=p(2);return g(c.showDelete(t.id))}),i()()()}if(o&2){let e=l.$implicit;s(4),_("",e.regional_origen.nombre," "),s(4),_(" ",e.sucursal_origen.nombre," "),s(4),_(" ",e.usuario_origen.login," "),s(4),_(" ",T(17,16,e.fechaHoraOrigen,"dd/MM/yyyy"),""),s(5),_(" ",T(22,19,e.fechaHoraOrigen,"HH:mm:ss")," "),s(5),_("",e.regional_destino.nombre," "),s(4),_(" ",e.sucursal_destino.nombre," "),s(4),P(e.usuario_destino!=null&&e.usuario_destino.login?34:35),s(4),P(e.fechaHoraDestino?38:39),s(4),P(e.fechaHoraDestino?42:43),s(3),O(e.lotes),s(3),O(e.lotes),s(3),m("rounded",!0)("outlined",!0),s(),m("rounded",!0)("outlined",!0),s(),m("rounded",!0)("outlined",!0)}}function qt(o,l){if(o&1){let e=v();n(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"label"),a(7,"Regional:"),i()(),n(8,"div",10)(9,"p-dropdown",11),x("onChange",function(t){u(e);let c=p();return g(c.filterByRegional(t.value))})("onClear",function(){u(e);let t=p();return g(t.clearFilterRegional())}),i()()(),n(10,"div",8)(11,"div",9)(12,"label"),a(13,"Sucursal:"),i()(),n(14,"div",10)(15,"p-dropdown",12),x("onChange",function(t){u(e);let c=p();return g(c.filterBySucursal(t.value))})("onClear",function(){u(e);let t=p();return g(t.clearFilterSucursal())}),i()()()()(),n(16,"p-table",13,0),f(18,Pt,8,6,"ng-template",14)(19,Ft,15,0,"ng-template",15)(20,Kt,54,22,"ng-template",16),i()()()}if(o&2){let e=p();s(9),R(h(16,Ge)),m("options",e.regionales)("showClear",!0),s(6),R(h(17,Ge)),m("options",e.sucursales)("showClear",!0),s(),m("value",e.transferencias)("rows",10)("rowsPerPageOptions",h(18,Mt))("paginator",!0)("globalFilterFields",h(19,Vt))("tableStyle",h(20,Lt))("rowHover",!0)("showCurrentPageReport",!0)}}function Yt(o,l){o&1&&(n(0,"div")(1,"div",35),d(2,"p-progressSpinner",36),n(3,"span",37),a(4,"MINEXA S.R.L."),i()()())}var Qe=(()=>{let l=class l{constructor(r,t,c){this.transferenciaService=r,this.messageService=t,this.confirmationService=c,this.loading=!1}ngOnInit(){this.show()}show(){this.loading=!0,console.log("REQUEST->index"),this.transferenciaService.index().subscribe({next:r=>{this.regionales=r.regionales,this.sucursales=[],this.transferencias=r.transferencias,this.dataCompleto=r.transferencias,console.log("RESPONSE->index",r)},error:r=>{this.messageService.add({severity:"error",summary:"ERROR",detail:r.error.message}),console.log("RESPONSE->index Error en:",r.error)},complete:()=>{this.loading=!1}})}showCreate(){this.dialog.create()}showEdit(r){this.dialog.edit(r)}showDelete(r){this.confirmationService.confirm({message:"Est\xE1 seguro de eliminar el Registro...?",header:"Confirmar",icon:"pi pi-exclamation-triangle",accept:()=>{console.log("REQUEST->destroy",r),this.transferenciaService.destroy(r).subscribe({next:t=>{this.transferencias=this.transferencias.filter(c=>c.id!==r),this.messageService.add({severity:"success",summary:"CONFIRMACI\xD3N",detail:t.msg,life:3e3}),console.log("RESPONSE->destroy",t)},error:t=>{this.messageService.add({severity:"error",summary:"ERROR",detail:t.error.message}),console.log("RESPONSE->destroy Error en:",t.error)}})}})}showReportGral(){alert("REPORTE COMPLETO")}showReport(r){alert("REPORTE INDIVIDUAL")}loadSucursales(r){let t=this.regionales.find(c=>c.id===r);this.sucursales=t?t.sucursales:[]}filterByRegional(r){this.transferencias=this.dataCompleto.filter(t=>t.idRegionalOrigen==r),this.dataFiltrado=this.transferencias,this.loadSucursales(r)}filterBySucursal(r){this.transferencias=this.dataCompleto.filter(t=>t.idSucursalOrigen==r)}clearFilterRegional(){this.transferencias=this.dataCompleto}clearFilterSucursal(){this.transferencias=this.dataFiltrado}};l.\u0275fac=function(t){return new(t||l)(b(Le),b(V),b(J))},l.\u0275cmp=L({type:l,selectors:[["app-index-transferencia"]],viewQuery:function(t,c){if(t&1&&re(ke,5),t&2){let y;oe(y=ae())&&(c.dialog=y.first)}},standalone:!0,features:[ue([V,J]),A],decls:11,vars:5,consts:[["dt",""],[1,"card-header","shadow-5"],[4,"ngIf"],[1,"card-footer"],[3,"changeTransferencia"],[1,"card-body","shadow-5"],[1,"grid","flex","justify-content-center"],[1,"col-10"],[1,"grid","field"],[1,"col-4","text-right","pt-2"],[1,"col-6"],["id","idRegional","optionValue","id","optionLabel","nombre","placeholder","TODOS",3,"onChange","onClear","options","showClear"],["id","idSucursal","optionValue","id","optionLabel","nombre",3,"onChange","onClear","options","showClear"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","rowsPerPageOptions","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"grid"],[1,"col-12","md:col-8"],["pRipple","","severity","primary","label","Nuevo","icon","pi pi-plus",3,"click","outlined","raised","text"],["pRipple","","severity","info","label","Reporte","icon","pi pi-print",1,"ml-2",3,"click","outlined","raised","text"],[1,"col-12","md:col-4","text-right"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["pSortableColumn","cooperativa.nombre",2,"width","20%"],["field","cooperativa.nombre"],["pSortableColumn","mineral.nombre",2,"width","20%"],["field","mineral.nombre"],[2,"width","20%"],[1,"prefijoRow"],["pRipple","","icon","pi pi-eye","severity","info",1,"mr-2",3,"click","rounded","outlined"],["pRipple","","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded","outlined"],["pRipple","","icon","pi pi-trash","severity","danger",3,"click","rounded","outlined"],["color","red"],[1,"card","mt-3","flex","flex-column","justify-content-center","align-items-center",2,"height","50vh"],["ariaLabel","loading"],[1,"loader","ps-5"]],template:function(t,c){t&1&&(n(0,"div",1)(1,"h3"),a(2,"Gestion de Transferencias"),i()(),d(3,"hr"),f(4,qt,21,21,"div",2),d(5,"hr"),n(6,"div",3)(7,"app-dialog-transferencia",4),x("changeTransferencia",function(){return c.show()}),i(),d(8,"p-confirmDialog")(9,"p-toast"),i(),f(10,Yt,5,0,"div",2)),t&2&&(s(4),m("ngIf",!c.loading),s(4),R(h(4,Ot)),s(2),m("ngIf",c.loading))},dependencies:[ve,Y,ee,q,K,N,ye,be,W,Z,j,U,Q,Ee,Te,we,H,z,B,G,$,k,ke]});let o=l;return o})();var Pe=(()=>{let l=class l{constructor(r){this.httpClient=r,this.url="http://127.0.0.1:8000/api/registro/transito/recepcion/"}index(){return this.httpClient.get(this.url+"index")}edit(r){return this.httpClient.get(this.url+"edit/"+r)}update(r){return this.httpClient.put(this.url+"update",r)}};l.\u0275fac=function(t){return new(t||l)(me(ge))},l.\u0275prov=ie({token:l,factory:l.\u0275fac,providedIn:"root"});let o=l;return o})();var Xt=()=>({width:"75vw"}),zt=()=>[10,25,50],Jt=()=>["numLote","fechaHora","cooperativa.nombre","mineral.nombre","pesoBruto","estado"],Zt=()=>({"min-width":"75rem"});function $t(o,l){if(o&1){let e=v();n(0,"div",7),d(1,"div",26),n(2,"div",27)(3,"span",28),d(4,"i",29),n(5,"input",30),x("input",function(t){u(e),p();let c=X(44);return g(c.filterGlobal(t.target.value,"contains"))}),i()()()()}}function ei(o,l){o&1&&(n(0,"tr")(1,"th",31),a(2," LOTE "),i(),n(3,"th",32),a(4," MINERAL "),i(),n(5,"th",32),a(6," PESO-BRUTO "),i(),n(7,"th",33),a(8," LEY "),i(),n(9,"th",34),d(10,"p-tableHeaderCheckbox"),i()())}function ti(o,l){if(o&1&&(n(0,"span",35),a(1),i(),a(2),d(3,"br")),o&2){let e=l.$implicit;s(),_("",e.mineral.abreviatura," : "),s(),le("",e.valor," ",e.unidad_medida_ley.abreviatura,"")}}function ii(o,l){if(o&1&&D(0,ti,4,3,null,null,I),o&2){let e=l.$implicit;O(e.detalles)}}function ni(o,l){if(o&1&&(n(0,"tr")(1,"td")(2,"h2"),a(3),i()(),n(4,"td")(5,"span",35),a(6,"NOMBRE: "),i(),a(7),d(8,"br"),n(9,"span",35),a(10,"TARA: "),i(),a(11),d(12,"br"),n(13,"span",35),a(14,"HUMEDAD: "),i(),a(15),i(),n(16,"td")(17,"span",35),a(18,"K-BRUTO: "),i(),a(19),d(20,"br"),n(21,"span",35),a(22,"K-NETO: "),i(),a(23),i(),n(24,"td"),D(25,ii,2,0,null,null,I),i(),n(27,"td",36),d(28,"p-tableCheckbox",37),i()()),o&2){let e=l.$implicit;s(3),F(e.lote.numLote),s(4),_(" ",e.lote.mineral.nombre,""),s(4),_(" ",e.lote.tara,""),s(4),_(" ",e.lote.humedad," "),s(4),_(" ",e.lote.pesoBruto,""),s(4),_(" ",e.lote.pesoBruto-(e.lote.tara+e.lote.humedad)," "),s(2),O(e.lote.leyes),s(3),m("value",e)}}function ri(o,l){o&1&&(n(0,"small",38),a(1,"Requerido. Alfanum\xE9rico de: 1-500"),i())}function oi(o,l){if(o&1){let e=v();n(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"h5"),a(7,"Sucursal Origen"),i(),d(8,"hr"),n(9,"div",10)(10,"div",11)(11,"label"),a(12,"Regional:"),i()(),n(13,"div",12)(14,"input",13),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.recepcion.regional_origen.nombre,t)||(c.recepcion.regional_origen.nombre=t),g(t)}),i()()(),n(15,"div",10)(16,"div",11)(17,"label"),a(18,"Sucursal:"),i()(),n(19,"div",12)(20,"input",14),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.recepcion.sucursal_origen.nombre,t)||(c.recepcion.sucursal_origen.nombre=t),g(t)}),i()()()()(),n(21,"div",8)(22,"div",9)(23,"h5"),a(24,"Sucursal Destino"),i(),d(25,"hr"),n(26,"div",10)(27,"div",11)(28,"label"),a(29,"Regional:"),i()(),n(30,"div",12)(31,"input",15),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.recepcion.regional_destino.nombre,t)||(c.recepcion.regional_destino.nombre=t),g(t)}),i()()(),n(32,"div",10)(33,"div",11)(34,"label"),a(35,"Sucursal:"),i()(),n(36,"div",12)(37,"input",16),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.recepcion.regional_destino.nombre,t)||(c.recepcion.regional_destino.nombre=t),g(t)}),i()()()()()()()(),d(38,"hr"),n(39,"div",17)(40,"h5"),a(41,"Lotes a recepcionar"),i(),d(42,"hr"),n(43,"p-table",18,0),E("selectionChange",function(t){u(e);let c=p(2);return C(c.selected,t)||(c.selected=t),g(t)}),f(45,$t,6,0,"ng-template",19)(46,ei,11,0,"ng-template",20)(47,ni,29,7,"ng-template",21),i(),n(48,"div",22)(49,"h5"),a(50,"Descripci\xF3n de env\xEDo:"),i(),n(51,"textarea",23),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.recepcion.descripcionOrigen,t)||(c.recepcion.descripcionOrigen=t),g(t)}),i()(),n(52,"div",22)(53,"h5"),a(54,"Descripci\xF3n de recepcion:"),i(),n(55,"textarea",24),E("ngModelChange",function(t){u(e);let c=p(2);return C(c.recepcion.descripcionDestino,t)||(c.recepcion.descripcionDestino=t),g(t)}),i(),f(56,ri,2,0,"small",25),i()(),n(57,"div")(58,"p")(59,"b"),a(60,"USUARIO: "),i(),a(61),d(62,"br"),n(63,"b"),a(64,"FECHA: "),i(),a(65),w(66,"date"),n(67,"b"),a(68,"HORA: "),i(),a(69),w(70,"date"),i()()()}if(o&2){let e=p(2);s(14),S("ngModel",e.recepcion.regional_origen.nombre),m("disabled",!0),s(6),S("ngModel",e.recepcion.sucursal_origen.nombre),m("disabled",!0),s(11),S("ngModel",e.recepcion.regional_destino.nombre),m("disabled",!0),s(6),S("ngModel",e.recepcion.regional_destino.nombre),m("disabled",!0),s(6),m("value",e.recepcionLotes),S("selection",e.selected),m("rows",10)("rowsPerPageOptions",h(32,zt))("paginator",!0)("globalFilterFields",h(33,Jt))("tableStyle",h(34,Zt))("rowHover",!0)("showCurrentPageReport",!0),s(8),S("ngModel",e.recepcion.descripcionOrigen),m("disabled",!0),s(4),S("ngModel",e.recepcion.descripcionDestino),s(),m("ngIf",!e.valDescripcion()),s(5),_e(" ",e.usuario.persona.nombre," ",e.usuario.persona.apePaterno," ",e.usuario.persona.apeMaterno,""),s(4),_(" ",T(66,26,e.fechaHora,"dd/MM/yyyy")," "),s(4),_(" ",T(70,29,e.fechaHora,"HH:mm:ss")," ")}}function ai(o,l){o&1&&(n(0,"div")(1,"div",39),d(2,"p-progressSpinner",40),n(3,"span",41),a(4,"Cargando..."),i()()())}function li(o,l){if(o&1&&(d(0,"hr"),f(1,oi,71,35,"div",4)(2,ai,5,0,"div",4)),o&2){let e=p();s(),m("ngIf",!e.loading),s(),m("ngIf",e.loading)}}function si(o,l){o&1&&(n(0,"div")(1,"h5"),a(2,"Guardando..."),i(),d(3,"span",47),i())}function ci(o,l){if(o&1){let e=v();n(0,"div",42)(1,"div",43),f(2,si,4,0,"div",4),i(),n(3,"div",44)(4,"p-button",45),x("click",function(){u(e);let t=p();return g(t.save())}),i(),n(5,"p-button",46),x("click",function(){u(e);let t=p();return g(t.cancel())}),i()()()}if(o&2){let e=p();s(2),m("ngIf",e.saving),s(2),m("text",!0)("raised",!0)("hidden",e.saving),s(),m("text",!0)("raised",!0)}}var Ne=(()=>{let l=class l{constructor(r,t,c){this.principalService=r,this.messageService=t,this.recepcionService=c,this.changeRecepcion=new ne}edit(r){this.estado=!0,this.loading=!0,this.saving=!1,console.log("REQUEST->edit",r),this.recepcionService.edit(r).subscribe({next:t=>{this.recepcion=t.recepcion,this.recepcionLotes=t.recepcion.lotes,this.selected=t.recepcion.lotes.filter(c=>c.estadoRecepcion=="RECIBIDO"),this.usuario=this.principalService.getUsuarioStorage(),this.initReloj(),console.log("RESPONSE->create",t)},error:t=>{this.messageService.add({severity:"error",summary:"ERROR",detail:t.error.message}),console.log("RESPONSE->edit Error en:",t.error)},complete:()=>{this.loading=!1}})}save(){this.prepareData(),this.validate()?(this.saving=!0,console.log("REQUEST->update",this.recepcion),this.recepcionService.update(this.recepcion).subscribe({next:r=>{this.recepcion=r.recepcion,this.changeRecepcion.emit(),this.messageService.add({severity:"success",summary:"CONFIRMACI\xD3N",detail:r.msg}),console.log("RESPONSE->update",r),this.estado=!1},error:r=>{this.messageService.add({severity:"error",summary:"ERROR",detail:r.error.message}),console.log("RESPONSE->update Error en:",r.error)}})):(this.messageService.add({severity:"error",summary:"ERROR",detail:"Datos incorrectos...!!"}),console.log("Datos Incorrectos...!!"))}prepareData(){this.recepcion.idUsuarioDestino=this.usuario.id,this.recepcion.fechaHoraDestino=this.fechaHora,this.recepcion.lotes=this.selected.map(r=>({idLote:r.idLote,estadoTransferencia:"ENVIADO",estadoRecepcion:"RECIBIDO"}))}cancel(){this.estado=!1}initReloj(){setInterval(()=>{this.fechaHora=new Date},1e3)}valIdRegionalOrigen(){return!!this.recepcion.idRegionalOrigen}valIdSucursalOrigen(){return!!this.recepcion.idSucursalOrigen}valIdRegionalDestino(){return!!this.recepcion.idRegionalDestino}valIdSucursalDestino(){return!!this.recepcion.idSucursalDestino}valIdLotes(){return this.recepcion.lotes.length>0}valDescripcion(){let r=/^[\w áéíóúüñÁÉÍÓÚÜÑ.-]{1,500}$/;return this.recepcion.descripcionDestino?!!r.test(this.recepcion.descripcionDestino):!1}validate(){return this.valIdRegionalOrigen()&&this.valIdSucursalOrigen()&&this.valIdRegionalDestino()&&this.valIdSucursalDestino()&&this.valIdLotes()&&this.valDescripcion()}};l.\u0275fac=function(t){return new(t||l)(b(Se),b(V),b(Pe))},l.\u0275cmp=L({type:l,selectors:[["app-dialog-recepcion"]],outputs:{changeRecepcion:"changeRecepcion"},standalone:!0,features:[A],decls:3,vars:5,consts:[["dt",""],["closeOnEscape","true","closable","true","header","REGISTRO DE RECEPCION","styleClass","p-fluid dialog-responsive custom-header",3,"visibleChange","visible","modal"],["pTemplate","content"],["pTemplate","footer"],[4,"ngIf"],[1,"grid","justify-content-center"],[1,"col-12","sm:col-10"],[1,"grid"],[1,"col-12","sm:col-6"],[1,"card"],[1,"grid","field"],[1,"col-4","text-right","pt-2"],[1,"col-8"],["type","text","pInputText","","id","regionalOrigen",1,"w-full",3,"ngModelChange","ngModel","disabled"],["type","text","pInputText","","id","sucursalOrigen",1,"w-full",3,"ngModelChange","ngModel","disabled"],["type","text","pInputText","","id","regionalDestino",1,"w-full",3,"ngModelChange","ngModel","disabled"],["type","text","pInputText","","id","sucursalDestino",1,"w-full",3,"ngModelChange","ngModel","disabled"],[1,"card","shadow-3"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"selectionChange","value","selection","rows","rowsPerPageOptions","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"field"],["pInputTextarea","","id","descripcion","rows","5","cols","20",1,"w-full",3,"ngModelChange","ngModel","disabled"],["pInputTextarea","","id","descripcion","rows","5","cols","20",1,"w-full",3,"ngModelChange","ngModel"],["class","p-error",4,"ngIf"],[1,"col-12","md:col-8"],[1,"col-12","md:col-4","text-right"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],[2,"width","15%"],[2,"width","30%"],[2,"width","20%"],[1,"text-center",2,"width","10%"],[1,"prefijoRow"],[1,"text-center"],[3,"value"],[1,"p-error"],[1,"card","mt-3","flex","flex-column","justify-content-center","align-items-center",2,"height","30vh"],["ariaLabel","loading"],[1,"loader","ps-5"],[1,"grid","custom-footer"],[1,"col-6","text-left"],[1,"col-6"],["pRipple","","label","Guardar","icon","pi pi-check","severity","primary",3,"click","text","raised","hidden"],["pRipple","","label","Cancelar","icon","pi pi-times","severity","warning",3,"click","text","raised"],[1,"saving"]],template:function(t,c){t&1&&(n(0,"p-dialog",1),E("visibleChange",function(M){return C(c.estado,M)||(c.estado=M),M}),f(1,li,3,2,"ng-template",2)(2,ci,6,6,"ng-template",3),i()),t&2&&(R(h(4,Xt)),S("visible",c.estado),m("modal",!0))},dependencies:[q,K,N,Re,Ie,Y,ee,W,H,z,B,pe,de,ce,k,fe,xe,he,j,U,G,$,se,Ce,Q]});let o=l;return o})();var di=()=>({width:"450px"}),qe=()=>({width:"100%"}),pi=()=>[10,25,50],mi=()=>["numLote","fechaHora","cooperativa.nombre","mineral.nombre","pesoBruto","estado"],_i=()=>({"min-width":"75rem"});function ui(o,l){if(o&1){let e=v();n(0,"div",16)(1,"div",17)(2,"p-button",18),x("click",function(){u(e);let t=p(2);return g(t.showReportGral())}),i()(),n(3,"div",19)(4,"span",20),d(5,"i",21),n(6,"input",22),x("input",function(t){u(e),p();let c=X(17);return g(c.filterGlobal(t.target.value,"contains"))}),i()()()()}o&2&&(s(2),m("outlined",!0)("raised",!0)("text",!0))}function gi(o,l){o&1&&(n(0,"tr")(1,"th",23),a(2," DATOS-ORIGEN "),d(3,"p-sortIcon",24),i(),n(4,"th",25),a(5," DATOS-DESTINO "),d(6,"p-sortIcon",26),i(),n(7,"th",25),a(8," ESTADO-TRANSFERE."),d(9,"p-sortIcon",26),i(),n(10,"th",25),a(11," ESTADO-RECEPCION "),d(12,"p-sortIcon",26),i(),n(13,"th",27),a(14," OPCIONES "),i()())}function fi(o,l){if(o&1&&(a(0),d(1,"br")),o&2){let e=p().$implicit;_(" ",e.usuario_destino==null?null:e.usuario_destino.login," ")}}function xi(o,l){o&1&&(n(0,"font",31),a(1,"Pendiente"),i(),d(2,"br"))}function hi(o,l){if(o&1&&(a(0),w(1,"date"),d(2,"br")),o&2){let e=p().$implicit;_(" ",T(1,1,e.fechaHoraDestino,"dd/MM/yyyy"),"")}}function vi(o,l){o&1&&(n(0,"font",31),a(1,"Pendiente"),i(),d(2,"br"))}function Si(o,l){if(o&1&&(a(0),w(1,"date")),o&2){let e=p().$implicit;_(" ",T(1,1,e.fechaHoraDestino,"HH:mm:ss")," ")}}function Ci(o,l){o&1&&(n(0,"font",31),a(1,"Pendiente"),i(),d(2,"br"))}function Ei(o,l){if(o&1&&(n(0,"span",28),a(1,"Lote: "),i(),n(2,"b"),a(3),i(),a(4),d(5,"br")),o&2){let e=l.$implicit;s(3),_("",e.lote.numLote," "),s(),F(e.estadoTransferencia)}}function wi(o,l){if(o&1&&(a(0),d(1,"br")),o&2){let e=p().$implicit;_(" ",e.estadoRecepcion,"")}}function Ti(o,l){o&1&&(n(0,"font",31),a(1,"Pendiente"),i(),d(2,"br"))}function yi(o,l){if(o&1&&(n(0,"span",28),a(1,"Lote: "),i(),n(2,"b"),a(3),i(),f(4,wi,2,1,"br")(5,Ti,3,0)),o&2){let e=l.$implicit;s(3),_("",e.lote.numLote," "),s(),P(e.estadoRecepcion=="RECIBIDO"?4:5)}}function bi(o,l){if(o&1){let e=v();n(0,"tr")(1,"td")(2,"span",28),a(3,"REGIONAL: "),i(),a(4),d(5,"br"),n(6,"span",28),a(7,"SUCURSAL: "),i(),a(8),d(9,"hr"),n(10,"span",28),a(11,"USUARIO: "),i(),a(12),d(13,"br"),n(14,"span",28),a(15,"FECHA: "),i(),a(16),w(17,"date"),d(18,"br"),n(19,"span",28),a(20,"HORA: "),i(),a(21),w(22,"date"),i(),n(23,"td")(24,"span",28),a(25,"REGIONAL: "),i(),a(26),d(27,"br"),n(28,"span",28),a(29,"SUCURSAL: "),i(),a(30),d(31,"hr"),n(32,"span",28),a(33,"USUARIO: "),i(),f(34,fi,2,1,"br")(35,xi,3,0),n(36,"span",28),a(37,"FECHA: "),i(),f(38,hi,3,4,"br")(39,vi,3,0),n(40,"span",28),a(41,"HORA: "),i(),f(42,Si,2,4)(43,Ci,3,0),i(),n(44,"td"),D(45,Ei,6,2,null,null,I),i(),n(47,"td"),D(48,yi,6,2,null,null,I),i(),n(50,"td")(51,"p-button",29),x("click",function(){let t=u(e).$implicit,c=p(2);return g(c.showReport(t.id))}),i(),n(52,"p-button",30),x("click",function(){let t=u(e).$implicit,c=p(2);return g(c.showEdit(t.id))}),i()()()}if(o&2){let e=l.$implicit;s(4),_("",e.regional_origen.nombre," "),s(4),_(" ",e.sucursal_origen.nombre," "),s(4),_(" ",e.usuario_origen.login," "),s(4),_(" ",T(17,14,e.fechaHoraOrigen,"dd/MM/yyyy"),""),s(5),_(" ",T(22,17,e.fechaHoraOrigen,"HH:mm:ss")," "),s(5),_("",e.regional_destino.nombre," "),s(4),_(" ",e.sucursal_destino.nombre," "),s(4),P(e.usuario_destino!=null&&e.usuario_destino.login?34:35),s(4),P(e.fechaHoraDestino?38:39),s(4),P(e.fechaHoraDestino?42:43),s(3),O(e.lotes),s(3),O(e.lotes),s(3),m("rounded",!0)("outlined",!0),s(),m("rounded",!0)("outlined",!0)}}function Ri(o,l){if(o&1){let e=v();n(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"label"),a(7,"Regional:"),i()(),n(8,"div",7)(9,"p-dropdown",10),x("onChange",function(t){u(e);let c=p();return g(c.filterByRegional(t.value))})("onClear",function(){u(e);let t=p();return g(t.clearFilterRegional())}),i()()(),n(10,"div",8)(11,"div",9)(12,"label"),a(13,"Sucursal:"),i()(),n(14,"div",7)(15,"p-dropdown",11),x("onChange",function(t){u(e);let c=p();return g(c.filterBySucursal(t.value))})("onClear",function(){u(e);let t=p();return g(t.clearFilterSucursal())}),i()()()()(),n(16,"p-table",12,0),f(18,ui,7,3,"ng-template",13)(19,gi,15,0,"ng-template",14)(20,bi,53,20,"ng-template",15),i()()()}if(o&2){let e=p();s(9),R(h(16,qe)),m("options",e.regionales)("showClear",!0),s(6),R(h(17,qe)),m("options",e.sucursales)("showClear",!0),s(),m("value",e.recepciones)("rows",10)("rowsPerPageOptions",h(18,pi))("paginator",!0)("globalFilterFields",h(19,mi))("tableStyle",h(20,_i))("rowHover",!0)("showCurrentPageReport",!0)}}function Ii(o,l){o&1&&(n(0,"div")(1,"div",32),d(2,"p-progressSpinner",33),n(3,"span",34),a(4,"MINEXA S.R.L."),i()()())}var Ye=(()=>{let l=class l{constructor(r,t,c){this.recepcionService=r,this.messageService=t,this.confirmationService=c,this.loading=!1}ngOnInit(){this.show()}show(){this.loading=!0,console.log("REQUEST->index"),this.recepcionService.index().subscribe({next:r=>{this.regionales=r.regionales,this.sucursales=[],this.recepciones=r.recepciones,this.dataCompleto=r.recepciones,console.log("RESPONSE->index",r)},error:r=>{this.messageService.add({severity:"error",summary:"ERROR",detail:r.error.message}),console.log("RESPONSE->index Error en:",r.error)},complete:()=>{this.loading=!1}})}showEdit(r){this.dialog.edit(r)}showReportGral(){alert("REPORTE COMPLETO")}showReport(r){alert("REPORTE INDIVIDUAL")}loadSucursales(r){let t=this.regionales.find(c=>c.id===r);this.sucursales=t?t.sucursales:[]}filterByRegional(r){this.recepciones=this.dataCompleto.filter(t=>t.idRegionalOrigen==r),this.dataFiltrado=this.recepciones,this.loadSucursales(r)}filterBySucursal(r){this.recepciones=this.dataCompleto.filter(t=>t.idSucursalOrigen==r)}clearFilterRegional(){this.recepciones=this.dataCompleto}clearFilterSucursal(){this.recepciones=this.dataFiltrado}};l.\u0275fac=function(t){return new(t||l)(b(Pe),b(V),b(J))},l.\u0275cmp=L({type:l,selectors:[["app-index-recepcion"]],viewQuery:function(t,c){if(t&1&&re(Ne,5),t&2){let y;oe(y=ae())&&(c.dialog=y.first)}},standalone:!0,features:[ue([V,J]),A],decls:11,vars:5,consts:[["dt",""],[1,"card-header","shadow-5"],[4,"ngIf"],[1,"card-footer"],[3,"changeRecepcion"],[1,"card-body","shadow-5"],[1,"grid","flex","justify-content-center"],[1,"col-8"],[1,"grid","field"],[1,"col-4","text-right","pt-2"],["id","idRegional","optionValue","id","optionLabel","nombre","placeholder","TODOS",3,"onChange","onClear","options","showClear"],["id","idSucursal","optionValue","id","optionLabel","nombre",3,"onChange","onClear","options","showClear"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","rowsPerPageOptions","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"grid"],[1,"col-12","md:col-8"],["pRipple","","severity","info","label","Reporte","icon","pi pi-print",1,"ml-2",3,"click","outlined","raised","text"],[1,"col-12","md:col-4","text-right"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["pSortableColumn","cooperativa.nombre",2,"width","20%"],["field","cooperativa.nombre"],["pSortableColumn","mineral.nombre",2,"width","20%"],["field","mineral.nombre"],[2,"width","20%"],[1,"prefijoRow"],["pRipple","","icon","pi pi-eye","severity","info",1,"mr-2",3,"click","rounded","outlined"],["pRipple","","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded","outlined"],["color","red"],[1,"card","mt-3","flex","flex-column","justify-content-center","align-items-center",2,"height","50vh"],["ariaLabel","loading"],[1,"loader","ps-5"]],template:function(t,c){t&1&&(n(0,"div",1)(1,"h3"),a(2,"Gestion de Recepciones"),i()(),d(3,"hr"),f(4,Ri,21,21,"div",2),d(5,"hr"),n(6,"div",3)(7,"app-dialog-recepcion",4),x("changeRecepcion",function(){return c.show()}),i(),d(8,"p-confirmDialog")(9,"p-toast"),i(),f(10,Ii,5,0,"div",2)),t&2&&(s(4),m("ngIf",!c.loading),s(4),R(h(4,di)),s(2),m("ngIf",c.loading))},dependencies:[ve,Y,ee,q,K,N,ye,be,W,Z,j,U,Q,Ee,Te,we,H,z,B,G,$,k,Ne]});let o=l;return o})();var Jn=[{path:"transferencia/index",component:Qe},{path:"recepcion/index",component:Ye}];export{Jn as TransitoRoutes};
